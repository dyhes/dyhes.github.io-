<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Lecture 1 (introduction) Internet network of networks infrastructure that provides services to applications provides programming interface to distributed applications protocol Protocols define the format, order of messages sent and received among network entities, and actions taken on msg transmission, receipt\nAccess network cable-based access\nfrequency division multiplexing (FDM): different channels transmitted in different frequency bands\ndigital subscriber line (DSL)\nuse existing telephone line to central office DSLAM\ndata over DSL phone line goes to Internet voice over DSL phone line goes to telephone net wireless access\n"><title>【Computer Network】Notes</title>
<link rel=canonical href=https://dyhes.github.io/p/computer-networknotes/><link rel=stylesheet href=/scss/style.min.6aa4d43a5cae1c51ef34b3f851ae7421f4b2f2d13827e2d975acbeb4f13c8710.css><meta property='og:title' content="【Computer Network】Notes"><meta property='og:description' content="Lecture 1 (introduction) Internet network of networks infrastructure that provides services to applications provides programming interface to distributed applications protocol Protocols define the format, order of messages sent and received among network entities, and actions taken on msg transmission, receipt\nAccess network cable-based access\nfrequency division multiplexing (FDM): different channels transmitted in different frequency bands\ndigital subscriber line (DSL)\nuse existing telephone line to central office DSLAM\ndata over DSL phone line goes to Internet voice over DSL phone line goes to telephone net wireless access\n"><meta property='og:url' content='https://dyhes.github.io/p/computer-networknotes/'><meta property='og:site_name' content='飞鸿踏雪泥'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2023-06-06T00:00:00+00:00'><meta property='article:modified_time' content='2023-06-06T00:00:00+00:00'><meta name=twitter:title content="【Computer Network】Notes"><meta name=twitter:description content="Lecture 1 (introduction) Internet network of networks infrastructure that provides services to applications provides programming interface to distributed applications protocol Protocols define the format, order of messages sent and received among network entities, and actions taken on msg transmission, receipt\nAccess network cable-based access\nfrequency division multiplexing (FDM): different channels transmitted in different frequency bands\ndigital subscriber line (DSL)\nuse existing telephone line to central office DSLAM\ndata over DSL phone line goes to Internet voice over DSL phone line goes to telephone net wireless access\n"><link rel="shortcut icon" href=/github.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu17834253352308399148.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>飞鸿踏雪泥</a></h1><h2 class=site-description>没有记录，就没有发生</h2></div></header><ol class=menu-social><li><a href=https://github.com/dyhes target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:dyheslin@gmail.com target=_blank title=Gmail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-gmail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 20h3a1 1 0 001-1V5a1 1 0 00-1-1h-3v16z"/><path d="M5 20h3V4H5A1 1 0 004 5v14a1 1 0 001 1z"/><path d="M16 4l-4 4-4-4"/><path d="M4 6.5l8 7.5 8-7.5"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/categories/><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#lecture-1-introduction>Lecture 1 (introduction)</a><ol><li><a href=#internet>Internet</a></li><li><a href=#protocol>protocol</a></li><li><a href=#access-network>Access network</a></li><li><a href=#packets>Packets</a></li><li><a href=#physical-media>Physical media</a></li><li><a href=#network-core>network-core</a><ol><li><a href=#two-key-functions>two key functions</a></li><li><a href=#packet-switching>packet switching</a></li><li><a href=#curcuit-switching>curcuit switching</a></li></ol></li><li><a href=#packet-delay>Packet delay</a><ol><li><a href=#d_proc>$d_{proc}$</a></li><li><a href=#d_queue>$d_{queue}$</a></li><li><a href=#d_trans>$d_{trans}$</a></li><li><a href=#d_prop>$d_{prop}$</a></li></ol></li><li><a href=#layers>Layers</a><ol><li><a href=#services>Services</a></li></ol></li><li><a href=#history>History</a></li></ol></li><li><a href=#lecture-2-application-layer>Lecture 2 (application layer)</a><ol><li><a href=#client-server-paradigm>client-server paradigm</a></li><li><a href=#peer-to-peer-architecture>peer-to-peer architecture</a></li><li><a href=#process-communicating>process communicating</a></li><li><a href=#sockets>sockets</a></li><li><a href=#addressing-processes>addressing processes</a></li><li><a href=#application-layer-protocol>application-layer protocol</a></li><li><a href=#internet-transport-protocols-services>Internet transport protocols services</a></li><li><a href=#http>HTTP</a><ol><li><a href=#cookies>cookies</a></li></ol></li><li><a href=#email>Email</a><ol><li><a href=#smtp>SMTP</a></li><li><a href=#imap>IMAP</a></li></ol></li><li><a href=#domain-name-system-dns>Domain Name System (DNS)</a><ol><li><a href=#hierarchy>Hierarchy</a></li></ol></li><li><a href=#local-dns-name-servers>Local DNS name servers</a></li><li><a href=#dns-name-resolution>DNS name resolution</a></li><li><a href=#caching-dns-information>Caching DNS information</a></li><li><a href=#dns-records>DNS records</a><ol><li><a href=#type>Type</a></li></ol></li><li><a href=#dns-protocal-messages>DNS protocal messages</a></li><li><a href=#p2p>P2P</a><ol><li><a href=#two-main-challenges>two main challenges</a></li><li><a href=#bittorrent>BitTorrent</a></li></ol></li><li><a href=#video-streaming-and-cdns>Video streaming and CDNs</a><ol><li><a href=#dash>DASH</a></li><li><a href=#cdns>CDNs</a></li></ol></li><li><a href=#socket-programming>Socket Programming</a></li></ol></li><li><a href=#lecture-3transport-layer>Lecture 3(Transport Layer)</a><ol><li><a href=#transport-layer-vs-network-layer>Transport layer vs. Network layer</a></li><li><a href=#actions>Actions</a></li><li><a href=#types>Types</a></li><li><a href=#demultiplexing-and-multiplexing>Demultiplexing and multiplexing</a><ol><li><a href=#connection-oriented-demultiplex>connection-oriented demultiplex</a></li></ol></li><li><a href=#udp>UDP</a></li><li><a href=#segment-format>segment format</a><ol><li></li></ol></li><li><a href=#reliable-data-transfer>Reliable Data Transfer</a></li><li><a href=#tcp>TCP</a><ol><li><a href=#congestion-control>congestion control</a></li><li><a href=#tcp-congestion-control>TCP congestion control</a></li><li><a href=#delay-based>Delay-based</a></li><li><a href=#flow-control>flow control</a></li></ol></li></ol></li><li><a href=#lecture-4-network-layer-data-plane>Lecture 4 (Network-layer Data Plane)</a><ol><li><a href=#two-key-function>Two key function</a></li><li><a href=#router>Router</a><ol><li><a href=#input-port-functions>Input port functions</a></li><li><a href=#switching-fabrics>Switching fabrics</a></li><li><a href=#input-port-queueing>Input port queueing</a></li><li><a href=#output-port-queueing>output port queueing</a></li></ol></li><li><a href=#internet-protocol>Internet Protocol</a><ol><li><a href=#ipv4>IPV4</a></li><li><a href=#address>address</a></li><li><a href=#cidr>CIDR</a></li><li><a href=#subnets>Subnets</a></li><li><a href=#dhcp>DHCP</a></li><li><a href=#icann>ICANN</a></li><li><a href=#nat>NAT</a></li><li><a href=#ipv6>IPV6</a></li></ol></li><li><a href=#generalized-forwarding>Generalized Forwarding</a><ol><li><a href=#flow-table>Flow table</a></li></ol></li></ol></li><li><a href=#lecture-5-network-layer-control-plane>Lecture 5 (Network-layer Control Plane)</a><ol><li><a href=#per-router-control-plane>Per-router control plane</a><ol><li><a href=#routing-algorithm>Routing algorithm</a></li><li><a href=#scalable-routing>scalable routing</a></li></ol></li><li><a href=#icmp>ICMP</a></li></ol></li><li><a href=#lecture-6-link-layer>Lecture 6 (Link-Layer)</a><ol><li><a href=#terminology>Terminology</a></li><li><a href=#context>Context</a></li><li><a href=#services-1>Services</a></li><li><a href=#implementation>implementation</a></li><li><a href=#mac-addresses>MAC addresses</a></li><li><a href=#multiple-access-links>Multiple access links</a></li><li><a href=#multiple-access-protocols>Multiple access protocols</a><ol><li><a href=#taxonomy>taxonomy</a></li><li><a href=#channel-partitioning>channel partitioning</a></li><li><a href=#random-access>Random access</a></li><li><a href=#taking-turns>taking turns</a></li></ol></li><li><a href=#arp>ARP</a></li><li><a href=#ethernet>Ethernet</a><ol><li><a href=#topology>topology</a></li><li><a href=#frame-structure>frame structure</a></li><li><a href=#feature>feature</a></li><li><a href=#standards>standards</a></li></ol></li><li><a href=#switch>Switch</a><ol><li><a href=#multiple-simultaneous-transmissions>multiple simultaneous transmissions</a></li><li><a href=#self-learning>self-learning</a></li></ol></li><li><a href=#vlan>VLAN</a><ol><li><a href=#port-based-vlans>Port-based VLANs</a></li></ol></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/star/ style=background-color:#2e317c;color:>一天星</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/computer-networknotes/>【Computer Network】Notes</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 06, 2023</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>21 minute read</time></div></footer></div></header><section class=article-content><h2 id=lecture-1-introduction>Lecture 1 (introduction)</h2><h3 id=internet>Internet</h3><ul><li>network of networks</li><li>infrastructure that provides services to applications</li><li>provides programming interface to distributed applications</li></ul><h3 id=protocol>protocol</h3><p>Protocols define the format, order of messages sent and received among network entities, and actions taken on msg transmission, receipt</p><h3 id=access-network>Access network</h3><ul><li><p>cable-based access</p><p>frequency division multiplexing (FDM): different channels transmitted in different frequency bands</p></li><li><p>digital subscriber line (DSL)</p><p>use existing telephone line to central office DSLAM</p><ul><li>data over DSL phone line goes to Internet</li><li>voice over DSL phone line goes to telephone net</li></ul></li><li><p>wireless access</p><ul><li>Wireless local area networks</li><li>wide-area cellular access networks</li></ul></li><li><p>enterprise networks</p><ul><li>companies, universities</li></ul></li></ul><h3 id=packets>Packets</h3><p>host sending function:</p><ul><li><p>takes application message</p></li><li><p>breaks into smaller chunks known as packets, of length L bits</p></li><li><p>transmits packet into access network at transmission rate R</p><p>link transmission rate, aka link capacity, aka link bandwidth</p></li><li><p>packet transmission delay:</p><p>time needed to transmit L-bit packet into link $=\frac{L(bits)}{R(bits/sec)}$</p></li></ul><h3 id=physical-media>Physical media</h3><ul><li><p>guided media</p><p>signals propagate in solid media: copper, fiber, coax</p><ul><li><p>Twisted pair (TP)</p><p>two insulated copper wires</p></li><li><p>Coaxial cable</p><p>two concentric copper conductors</p></li><li><p>fiber optic cable</p><p>glass fiber carrying light pulses, each pulse a bit</p></li></ul></li><li><p>unguided media</p><p>signals propagate freely: radio</p><ul><li><p>wireless radio</p><p>signal carried in various &ldquo;bands&rdquo; in electromagnetic spectrum</p></li></ul></li></ul><h3 id=network-core>network-core</h3><h4 id=two-key-functions>two key functions</h4><ul><li>forwarding<ul><li>aka &ldquo;switching&rdquo;</li><li>local action: move arriving packet from router&rsquo;s input link to appropriate router output link</li></ul></li><li>routing:<ul><li>global action: determine source-destination paths taken by packets</li></ul></li></ul><h4 id=packet-switching>packet switching</h4><p>hosts break application-layer messages into packets</p><p>network forwards packets from one router to the next, across links on the path from source to destination</p><ul><li><p>store-and-forwarding</p><p>entire packet must arrive at router before it can be transmitted on next link</p></li><li><p>queueing</p><p>if arrival rate to link exceeds transmission rate of link for some period of time</p><ul><li>packets will queue</li><li>packets can be dropped(lost) if memory (buffer) in router fills up</li></ul></li></ul><h4 id=curcuit-switching>curcuit switching</h4><p>end-end resources allocated to, reserved for &ldquo;call&rdquo; bewteen source and destination</p><ul><li><p>each link has four circuits</p></li><li><p>dedicated resources: no sharing</p></li><li><p>circuit segment idle if not used by call</p></li><li><p>commonly used in traditional telephone networks</p></li><li><p>types</p><ul><li><p>frequency division multiplexing (FDM)</p><p>optical, electromagnetic frequencies divides into (narrow) frequency bands</p></li><li><p>time division multiplexing (TDM)</p><p>time divided into slots</p></li></ul></li></ul><h3 id=packet-delay>Packet delay</h3><p>$$
d_{nodal}=d_{proc}+d_{queue}+d_{trans}+d_{prop}
$$</p><p><img src=https://i.ibb.co/K90SsxR/image-20221006143351261.png loading=lazy alt=image-20221006143351261></p><h4 id=d_proc>$d_{proc}$</h4><p>proccessing delay</p><ul><li>check bit errors</li><li>determine output link</li><li>typically&lt;microsecs</li></ul><h4 id=d_queue>$d_{queue}$</h4><p>queueing delay</p><ul><li>depends on congestion level of router</li><li>$\alpha$ : average packet arrival rate</li><li>tranfic intensity: $\frac{L\cdot a}{R}$<ul><li>$\frac{L\cdot a}{R}\sim 0$ avg. queueing delay small</li><li>$\frac{L\cdot a}{R}\to 1$ avg. queueing delay large</li><li>$\frac{L\cdot a}{R}\gt 1$ average delay infinite</li></ul></li></ul><h4 id=d_trans>$d_{trans}$</h4><p>transmission delay</p><ul><li>$d_{trans=L/R}$</li></ul><h4 id=d_prop>$d_{prop}$</h4><p>propagation delay</p><ul><li>$d$ : length of physical link</li><li>$s$ : propagation speed</li><li>$d_{prop}=d/s$</li></ul><h3 id=layers>Layers</h3><p>each layer implements a service</p><ul><li><p>application</p><p>supporting network applications</p><p>HTTP,IMAP,SMTP,DNS</p></li><li><p>transport</p><p>process-process data transfer</p><p>TCP,UDP</p></li><li><p>network</p><p>routing of datagrams from source to destination</p><p>IP, routing protocols</p></li><li><p>link</p><p>data transfer bewteen neighboring network elements</p><p>Ethernet, WiFi, PPP</p></li><li><p>physical</p><p>bits &ldquo;on the wire&rdquo;</p></li></ul><h4 id=services>Services</h4><ul><li><p>application</p><p>exchanges message M to implement some application service using services of transport layer</p></li><li><p>transport</p><p>transfers application-layer M from one process to another, using network layer services</p><p>encapsulates application-layer M with transport layer header $H_t$ to create a transport-layer segment</p></li><li><p>network</p><p>transfer transport-layer segment $[H_t,M]$ from one host to another, using link layer services</p><p>encapsulates transport-later segment $[H_t,M]$ with network layer header $H_n$ to create a network-layer datagram</p></li><li><p>link</p><p>transfer network-layer datagram $[H_n|H_t,M]$ from host to neighboring host, using physical layer services</p><p>encapsulates network-later datagram $[H_n|H_t,M]$, with link-layer header $H_l$ to crate a link-layer frame</p></li></ul><p><img src=https://i.ibb.co/dgN0Hj9/image-20221006153800437.png loading=lazy alt=image-20221006153800437></p><p><img src=https://i.ibb.co/4gKGvPK/image-20221006154133008.png loading=lazy alt=image-20221006154133008></p><h3 id=history>History</h3><ul><li>1961-1972: early packet-switching principles</li><li>1972-1980： internetworking; new, proprietary networks</li><li>1980-1990: new protocols, many new networks</li><li>1990-2000s: commercialization, the Web, new applications</li><li>2005-now: more application, mobility, cloud</li></ul><h2 id=lecture-2-application-layer>Lecture 2 (application layer)</h2><h3 id=client-server-paradigm>client-server paradigm</h3><ul><li><p>server</p><ul><li>always-on host</li><li>permanent IP address</li><li>often in data centers, for scaling</li></ul></li><li><p>clients</p><ul><li>contact, communicate with server</li><li>may be intermittently connected</li><li>may have dynamic IP addresses</li><li>do not communicate directly with each other</li></ul></li><li><p>example</p><p>HTTP, IMAP, FTP</p></li></ul><h3 id=peer-to-peer-architecture>peer-to-peer architecture</h3><ul><li>no always-on host</li><li>arbitrary end systems directly communicate</li><li>peers request service from other peers, provide service in return to other peers</li><li>peers are intermittently connected and change IP addresses</li><li>example: P2P file sharing</li></ul><h3 id=process-communicating>process communicating</h3><p>process: program running within a host</p><ul><li>within same host, two processes communicate using inter-process communication (defined by OS)</li><li>processes in different hosts communicate by exchanging messages<ul><li>client process: process that initiates communication</li><li>server process: process that waits to be contacted</li></ul></li></ul><h3 id=sockets>sockets</h3><ul><li>process sends/receives messages to/from its socket</li><li>socket analogous to door<ul><li>sending process shoves message out door</li><li>sending process relies on transport infrastructure on other side of door to deliver message to socket at receiving process</li></ul></li></ul><h3 id=addressing-processes>addressing processes</h3><p>to receive messages, process must have identifier which includes both IP address and port numbers associated with process on host</p><h3 id=application-layer-protocol>application-layer protocol</h3><p>An application-layer protocol defines:</p><ul><li><p>types of messages exchanged</p><p>e.g. request, response</p></li><li><p>message syntax</p><p>what fields in messages & how fields are delineated</p></li><li><p>message semantics</p><p>meaning of information in fields</p></li><li><p>rules</p><p>for when and how send & respond to messages</p></li></ul><p>type of protocol</p><ul><li>open protocols<ul><li>defined in RFCs, everyone has access to protocol definition</li><li>allows for interoperability</li><li>e.g. HHTP,SMTP</li></ul></li><li>proprietary protocols<ul><li>e.g. Skype, Zoom</li></ul></li></ul><h3 id=internet-transport-protocols-services>Internet transport protocols services</h3><ul><li><p>TCP service</p><ul><li><p>reliable transport</p></li><li><p>flow conrtol</p><p>sender won&rsquo;t overwhelm receiver</p></li><li><p>congestion control</p><p>throttle sender when network overloaded</p></li><li><p>connection-oriented</p><p>setup required between client and server processes</p></li><li><p>does not provide: timing, minimum throughput guarantee, security</p></li></ul></li><li><p>UDP service</p><ul><li>unreliable transfer</li></ul></li></ul><h3 id=http>HTTP</h3><p>hypertext transfer protocol (application-layer)</p><p>&ldquo;stateless&rdquo;: server maintains no information about past client requests</p><ul><li><p>non persistent</p><ul><li>tcp connection opened</li><li>at most one object sent over tcp connection</li><li>tcp connection closed</li></ul><p>downloading multiple objects required multiple connections</p></li><li><p>persistent (HTTP1.1)</p><ul><li>tcp connection opened</li><li>multiple objects can be sent over single tcp connection</li><li>tcp connection closed</li></ul></li></ul><h4 id=cookies>cookies</h4><p>used to maintain some state between transactions</p><p>can be used for</p><ul><li>authorization</li><li>shopping carts</li><li>recommendations</li><li>user session state</li></ul><h3 id=email>Email</h3><ul><li>user agents</li><li>mail servers</li><li>simple mail transfer protocol: SMTP</li></ul><h4 id=smtp>SMTP</h4><ul><li>SMTP handshaking</li><li>SMTP transfer of messages</li><li>SMTP closure</li></ul><h4 id=imap>IMAP</h4><p>Internet Mail Access Protocol: messages stored on server, IMAP provides retrieval, deletion, folders of stored messages on server</p><h3 id=domain-name-system-dns>Domain Name System (DNS)</h3><p>distributed database implemented in hierarchy of many name servers</p><p>application-layer protocol: hosts, DNS servers communicate to resolve name( address/name translation)</p><p>services:</p><ul><li><p>hostname-to-IP-address translation</p></li><li><p>host aliasing</p><p>canonical, alias names</p></li><li><p>mail server aliasing</p></li><li><p>load distribution</p><p>replicated Web servers: many IP addresses correspond to one name</p></li></ul><h4 id=hierarchy>Hierarchy</h4><ul><li><p>root</p><p>official, contact-of-last-resort by name servers that can not resolve name</p></li><li><p>Top level Domain</p></li><li><p>Authoritative</p></li></ul><h3 id=local-dns-name-servers>Local DNS name servers</h3><p>when host makes DNS query, it is sent to its local DNS server</p><ul><li>Local DNS server returns reply, answering:<ul><li>from its local cache of recent name-to-address translation pairs( possibly out of dates)</li><li>forwarding request into DNS hierarchy for resolution</li></ul></li><li>each ISP has local DNS name server</li></ul><h3 id=dns-name-resolution>DNS name resolution</h3><ul><li><p>iterated query</p><p><img src=https://i.ibb.co/ByZm2Sf/image-20221008221149895.png loading=lazy alt=image-20221008221149895></p></li><li><p>recursive query</p><p>puts burden of name resolution on contacted name server</p><p><img src=https://i.ibb.co/XpJ5xv2/image-20221008221313656.png loading=lazy alt=image-20221008221313656></p></li></ul><h3 id=caching-dns-information>Caching DNS information</h3><p>one name server learns mapping, it caches mapping, and immediately returns a cached mapping in response to a query</p><ul><li>improves response time</li><li>cache entries timeout (disappear) after some time (TTL)</li><li>TLD server typically cached in local name servers</li><li>cached entries may be out-of-date</li></ul><h3 id=dns-records>DNS records</h3><p>resource records(RR) format: (name, value, type, ttl)</p><h4 id=type>Type</h4><ul><li><p>A</p><p>name is host</p><p>value is IP address</p></li><li><p>NS</p><p>name is domain (e.g. foo.com)</p><p>value is hostname of authoritative name server for this domain</p></li><li><p>CNAME</p><p>name is alias name for some &ldquo;canonnical&rdquo; (the real) name</p><p>value is canonical name</p><p>e.g. <a class=link href=https://www.ibm.com target=_blank rel=noopener>www.ibm.com</a> is really servereasy.backup2.ibm.com</p></li></ul><h3 id=dns-protocal-messages>DNS protocal messages</h3><p>DNS query and reply messages, both have same format</p><ul><li><p>message header</p><ul><li><p>identification</p><p>16 bit ## for query</p><p>reply to query uses same #</p></li><li><p>flags</p><ul><li>query or reply</li><li>recursion desired</li><li>recursion avaliable</li><li>reply is authoritative</li></ul></li></ul></li></ul><p><img src=https://i.ibb.co/LJF1Sb7/image-20221008222553158.png loading=lazy alt=image-20221008222553158></p><h3 id=p2p>P2P</h3><h4 id=two-main-challenges>two main challenges</h4><ul><li>the peers may join or leave the network, so the service provided by a particular peer will come and go</li><li>the peer address is likely to change</li></ul><h4 id=bittorrent>BitTorrent</h4><p>P2P file distribution</p><ul><li>file devided into 256kb chunks</li><li>peers in torrent send/receive file chunks</li></ul><p>participant</p><ul><li><p>tracker</p><p>tracks peers participating in torrent</p></li><li><p>torrent</p><p>group of peers exchanging chunks of a file</p></li></ul><h3 id=video-streaming-and-cdns>Video streaming and CDNs</h3><p>stream video traffic: major consumer of Internet bandwidth</p><ul><li><p>video</p><p>sequence of images displayed at constant rate</p></li><li><p>digital image</p><p>array of pixels</p><p>each pixel represented by bits</p></li><li><p>coding</p><p>use redundancy within and between images to decrease ## bits used to encode image</p><ul><li>spatial</li><li>temporal</li></ul><p>two type of video encoding method</p><ul><li><p>CBR: (constant bit rate)</p><p>video encoding rate fixed</p></li><li><p>VBR: (variable bit rate)</p><p>video encoding rate changes as amout of spatial, temporal encoding changes</p></li></ul></li><li><p>streaming</p><p>client playout early part of video, while server still sending later part of video</p></li></ul><p>main challenges</p><ul><li>server-to-client bandwidth will vary over time</li><li>packet loss, delay due to congestion</li></ul><h4 id=dash>DASH</h4><p>Dynamic, Adaptive Streaming over HTTP</p><h5 id=server>server</h5><ul><li>divides video file into multiple chunks</li><li>each chunk encoded at multiple different rates</li><li>different rate encodings stroed in different files</li><li>files replicated in various CDN nodes</li><li>manifest file: provides URLs for different chunks</li></ul><h5 id=client>client</h5><ul><li>periodically estimates server-to-client bandwidth</li><li>consulting manifest, requests one chunk at a time<ul><li>chooses maximum coding rate sustainable given current bandwidth</li><li>can choose different coding rates at different points in time (depending on available bandwidth at time), and from different servers</li></ul></li></ul><h4 id=cdns>CDNs</h4><p>store/serve multiple copies of videos at multiple geographically distributed sites</p><ul><li><p>enter deep</p><p>push CDN servers deep into many access networks</p></li><li><p>bring home</p><p>smaller number of larger clusters in POPs near access nets</p></li></ul><h3 id=socket-programming>Socket Programming</h3><p>socket: the only api that sits between application layer and transport layer</p><h2 id=lecture-3transport-layer>Lecture 3(Transport Layer)</h2><p>provide <strong>logical communication</strong> between application processes running on different hosts</p><p>actions in end systems:</p><ul><li>sender: break application messages into segments, passes to network layer</li><li>receiver: reassembles segments into messages, passes to application layer</li></ul><h3 id=transport-layer-vs-network-layer>Transport layer vs. Network layer</h3><ul><li><p>network layer: logical communication between hosts</p></li><li><p>transport layer: logical communication between processes</p><p>relies on, enhances, network layer services</p></li></ul><p>analogy</p><p>12 kids in Ann&rsquo;s house sending letters to 12 kids in Bill&rsquo;s</p><ul><li>hosts=houses</li><li>processes=kids</li><li>app messages =letters in envelops</li><li>transport protocol= Ann and Bill who demux to in-hohuse siblings</li><li>network-layer protocol= postal service</li></ul><h3 id=actions>Actions</h3><ul><li>Sender:<ul><li>is passed an application-layer message</li><li>determines segment header fields values</li><li>creates segment</li><li>passes segment to IP</li></ul></li><li>Receiver<ul><li>receives segment from IP</li><li>checks header values</li><li>extracts application-layer message</li><li>demultiplexes messages up to application via socket</li></ul></li></ul><h3 id=types>Types</h3><ul><li>TCP: transmission control protocol<ul><li>reliable, <strong>in-order</strong> delivery</li><li>congestion control</li><li>flow control</li><li>connection setup</li></ul></li><li>UDP: user datagram protocol<ul><li>unreliable, unordered delivery</li><li>no-frills extension of &ldquo;best-effort&rdquo; IP</li></ul></li><li>Services not available:<ul><li>delay guarantees</li><li>bandwidth guarantees</li></ul></li></ul><h3 id=demultiplexing-and-multiplexing>Demultiplexing and multiplexing</h3><p>demultiplexing at receiver:</p><p>use header info to deliver received segments to correct socket</p><ul><li><p>host receives IP datagrams</p><ul><li>each datagram has source IP address, destination IP address</li><li>each datagram carries one transport-layer segement</li><li>each segment has source, destination number</li></ul><p><img src=https://i.ibb.co/d7sfDjt/image-20221022194123464.png loading=lazy alt=image-20221022194123464></p></li><li><p>host uses IP address & port number to direct segment to appropriate socket</p></li></ul><h4 id=connection-oriented-demultiplex>connection-oriented demultiplex</h4><p>tcp socket identified by 4-tuple:</p><ul><li>source IP address</li><li>source port number</li><li>dest IP address</li><li>dest port number</li></ul><h3 id=udp>UDP</h3><ul><li>&ldquo;no frills&rdquo;,&ldquo;bare bones&rdquo; Internet transport protocol</li><li>&ldquo;best effort&rdquo; service, UDP segments may be：<ul><li>lost</li><li>delivered out-of-order to app</li></ul></li><li>connectionless<ul><li>no handshaking</li><li>each UDP segment handled independently</li></ul></li></ul><h3 id=segment-format>segment format</h3><ul><li>source port</li><li>dest port</li><li>length</li><li>checksum</li><li>application data</li></ul><p><img src=https://i.ibb.co/2NW7Bw7/image-20221022200348119.png loading=lazy alt=image-20221022200348119></p><h5 id=checksum>checksum</h5><p>goal: detect errors in transmitted segment</p><ul><li>sender<ul><li>treat contents of UDP segment( including UDP header fields and IP addresses) as sequence of 16-bit integers</li><li>checksum: addition (one&rsquo;s complement sum) of segment content</li><li>put checksum value into UDP checksum field</li></ul></li><li>receiver<ul><li>compute checksum</li><li>check if equals</li></ul></li></ul><h3 id=reliable-data-transfer>Reliable Data Transfer</h3><p><img src=https://i.ibb.co/tK0wtbK/image-20221022204239430.png loading=lazy alt=image-20221022204239430></p><p>&mldr;</p><h3 id=tcp>TCP</h3><p><img src=https://i.ibb.co/ggsLWs5/image-20221022211547831.png loading=lazy alt=image-20221022211547831></p><ul><li><p>sequence number</p><p>indicate the byte stream number of the first byte in segment payload</p><p>count of bytes( not segments)</p></li><li><p>Acknowledgement number</p><p>used by receiver to tell sender the sequence number of the next byte that&rsquo;s expected to be received from the sender</p><p>serves as a cumulative acknowledgement for all bytes of data that have occurred before that sequence number and</p></li></ul><h4 id=congestion-control>congestion control</h4><p>multiple senders/receivers</p><ul><li>end-end congestion control<ul><li>no explicit feedback from network</li><li>congestion inferred from observed loss, delay</li><li>approch taken by TCP</li></ul></li><li>network-assisted congestion control</li><li>routers provides direct feedback to sending/receiving hosts with flows passing through congested router</li><li>may indicate congestion level or explicitly set sending rate</li></ul><h4 id=tcp-congestion-control>TCP congestion control</h4><h5 id=loss-based>Loss-based</h5><h6 id=aimd>AIMD</h6><p>senders can increase sending rate until packet loss (congestion) occurs, then decrease sending rate on loss event</p><ul><li><p>Additive Increase</p><p>increase sending rate by 1 maximum segment size every RTT until loss detected</p></li><li><p>Multiplicative Decrease</p><p>cut sending rate in half at each loss event</p></li></ul><h6 id=slow-start>slow start</h6><p><img src=https://i.ibb.co/nQcrDmc/image-20221022223827678.png loading=lazy alt=image-20221022223827678></p><h4 id=delay-based>Delay-based</h4><p>Keeping the just pipe full but not fuller</p><h4 id=flow-control>flow control</h4><p>one sender one receiver</p><h2 id=lecture-4-network-layer-data-plane>Lecture 4 (Network-layer Data Plane)</h2><p>transport segment from sending to receiving host</p><ul><li><p>sender</p><p>encapsulates segments into datagrams, passes to link layer</p></li><li><p>receiver</p><p>delivers segments to transport layer protocol</p></li></ul><p>in every internet devices: hosts, routers</p><p>routers</p><ul><li>examines header fields in all IP datagrams passing through it</li><li>moves datagrams from input ports to output ports to transfer datagrams along end-end path</li></ul><h3 id=two-key-function>Two key function</h3><ul><li><p>forwarding</p><p>move packets from a router&rsquo;s input link to appropriate router output link</p></li><li><p>routing</p><p>determine route taken by packets from source to destination</p></li></ul><h3 id=router>Router</h3><p><img src=https://i.ibb.co/tQQmdry/image-20221023145657394.png loading=lazy alt=image-20221023145657394></p><h4 id=input-port-functions>Input port functions</h4><p><img src=https://i.ibb.co/VSvYyn7/image-20221023150518101.png loading=lazy alt=image-20221023150518101></p><h5 id=decentralized-switching>decentralized switching</h5><ul><li>using header field values, lookup output port using forwarding table in input port memory(" match plus action")</li><li>destination-based forwarding: forward based only on destination IP address (traditional)</li><li>generalized forwarding: forward based on any set of header field values</li></ul><h5 id=longest-prefix-matching>Longest prefix matching</h5><p>when looking for forwarding table entry for given destination address, use longest address prefix that matches destination address</p><h4 id=switching-fabrics>Switching fabrics</h4><ul><li>transfer packet from input link to appropriate output link</li><li>switching rate: rate at which packets can be transfer from inputs to outputs<ul><li>often measured as multiple of input/output line rate</li><li>N inputs: switching rate N times line rate desirable</li></ul></li></ul><h5 id=type-1>type</h5><ul><li><p>via memory</p><p>first generation routers:</p><ul><li>traditional computers with switching under direct control of CPU</li></ul></li><li><p>via bus</p><p>datagram from input port memory to output port memory via a shared bus</p></li><li><p>via interconnection network</p><p>can exploiting parallelism:</p><ul><li>fragment datagram into fixed length cells on entry</li><li>switch cells through the fabric, reassemble datagram at exit</li></ul></li></ul><p><img src=https://i.ibb.co/gFZQ9KF/image-20221023151806995.png loading=lazy alt=image-20221023151806995></p><h4 id=input-port-queueing>Input port queueing</h4><ul><li>if switch fabric slower than input ports combined<ul><li>queueing delay and loss due to input buffer overflow</li><li>Head-of-the-Line(HOL) blocking: queued datagram at front of queue prevents others in queue from moving forward</li></ul></li></ul><h4 id=output-port-queueing>output port queueing</h4><ul><li><p>buffering required when datagrams arrive from fabric faster than link transmission rate.</p><p>drop policy:</p><ul><li>tail drop: drop arriving packet</li><li>priority: drop on priority basis</li></ul></li><li><p>scheduling discipline chooses among queued datagrams for transmission</p><ul><li>first come, first served</li><li>priority</li><li>round robin</li><li>weighted fair queueing</li></ul></li></ul><p><img src=https://i.ibb.co/wRWDtMR/image-20221023153118613.png loading=lazy alt=image-20221023153118613></p><h3 id=internet-protocol>Internet Protocol</h3><h4 id=ipv4>IPV4</h4><h5 id=ip-datagram-format>IP Datagram format</h5><p><img src=https://i.ibb.co/b3gzN6M/image-20221023161411158.png loading=lazy alt=image-20221023161411158></p><h4 id=address>address</h4><ul><li><p>ip address</p><p>32-bit identifier associated with each host or router interface</p></li><li><p>interface</p><p>connection between host/router and physical link</p><ul><li>router&rsquo;s typically have multiple interfaces</li><li>host typically has one or two interfaces (e.g., wired Ethernet, wireless 802.11)</li></ul><p><img src=https://i.ibb.co/vs24SK2/image-20221023162100957.png loading=lazy alt=image-20221023162100957></p><p>blue are are link layer detail</p></li><li><p>subnet part
devices in same subnet have common high order bits</p></li><li><p>host part</p><p>remaining low order bits</p></li></ul><h5 id=ways-to-get-ip>ways to get IP</h5><ul><li><p>hard-coded by sysadmin in config file</p></li><li><p>Dynamic Host Configuration Protocol: dynamically get address from a server</p><ul><li>plug-and-play</li></ul></li></ul><h4 id=cidr>CIDR</h4><p>Classless InterDomain Routing( pronounced &ldquo;cider&rdquo;)</p><ul><li>subnet portion of address of arbitrary length</li><li>address format: a.b.c.d/x, where x is bit count in subnet portion of address</li></ul><p><img src=https://i.ibb.co/p4G54v2/image-20221023163856687.png loading=lazy alt=image-20221023163856687></p><h4 id=subnets>Subnets</h4><p>definition</p><ul><li>device interfaces that can physically reach each other without passing through an intervening router</li><li>a piece of the network that contains all devices that can reach each other without passing through a network layer router</li></ul><h4 id=dhcp>DHCP</h4><p>host dynamically obtains IP address from network server when it
&ldquo;joins&rdquo; network</p><ul><li>can renew its lease on address in use</li><li>allows reuse of addresses (only hold address while connected/on)</li><li>support for mobile users who join/leave network</li></ul><p>steps</p><ul><li><p>DHCP discover (optional)</p><p>hsot broadcasts DHCP discover msg</p></li><li><p>DHCP offer (optional)</p><p>DHCP server responds with DHCP offer msg</p></li><li><p>above two steps can be skipped if a client remembers and wishes to reuse a previously allocated network address</p></li><li><p>DHCP request</p><p>host requests IP address with DHCP request msg</p></li><li><p>DHCP ack</p><p>DHCP server sends address: DHCP ack msg</p></li></ul><p>typically, DHCP server will be co-located in router, serving all subnets to which router is attached</p><p><img src=https://i.ibb.co/GcLK3FM/image-20221023172138826.png loading=lazy alt=image-20221023172138826></p><p>DHCP can return more than just allocated IP address on subnet:</p><ul><li>address of first-hop router for client</li><li>name and IP address of DNS server</li><li>network mask (indicating network versus host portion of address)</li></ul><h4 id=icann>ICANN</h4><p>internet corporation for assigned names and numbers</p><ul><li>allocates IP addresses, through 5 regional registries( RRs) (who may allocate to local registries)</li><li>manages DNS root zone, including delegation of individual TLD management</li></ul><h4 id=nat>NAT</h4><p>network address translation:</p><p>all devices in local network share just one IPv4 address as far as outside world is concerned</p><p><img src=https://i.ibb.co/KrpxXkS/image-20221023174747031.png loading=lazy alt=image-20221023174747031></p><ul><li>all devices in local network have 32-bit address in a &ldquo;private&rdquo; IP address space (10/8,172.16/12,192.168/16 prefixes) that can only be used in local network</li><li>advantages:<ul><li>just one IP address needed form provider ISP for all devices</li><li>can change addresses of host in local network without notifying outside world</li><li>can change ISP without changing addresses of devices in local network</li><li>security: devices inside local net not directly addressable, visible by outside world</li></ul></li><li>implimentation<ul><li>outgoing datagrams replacement</li><li>translation pair remembrance</li><li>incoming datagrams replacement</li></ul></li></ul><h4 id=ipv6>IPV6</h4><p><img src=https://i.ibb.co/YjCK7hM/image-20221023205223631.png loading=lazy alt=image-20221023205223631></p><p>tunneling:</p><p>ipv6 datagram carried as payload in ipv4 datagram among ipv4 routers</p><p><img src=https://i.ibb.co/KhJnppc/image-20221023205301203.png loading=lazy alt=image-20221023205301203></p><h3 id=generalized-forwarding>Generalized Forwarding</h3><p>match plus action</p><ul><li>many header fields can determine action</li><li>many action possible: drop/copy/modify/log packet</li></ul><h4 id=flow-table>Flow table</h4><ul><li>flow: defined by header field values (in link-,network-,transport layer fields)</li></ul><p><img src=https://i.ibb.co/DpNtCGf/image-20221023211415475.png loading=lazy alt=image-20221023211415475></p><h2 id=lecture-5-network-layer-control-plane>Lecture 5 (Network-layer Control Plane)</h2><h3 id=per-router-control-plane>Per-router control plane</h3><h4 id=routing-algorithm>Routing algorithm</h4><p>determine &ldquo;good&rdquo; paths (equivalently routes), from sending hosts to receiving host, through network of routers</p><ul><li>path: sequence of routers packets traverse from given initial source host to final destination host</li><li>&ldquo;good&rdquo;: least &ldquo;cost&rdquo;, &ldquo;fastest&rdquo;, &ldquo;least congested&rdquo;</li></ul><h5 id=classification>classification</h5><p>pers1</p><ul><li><p>global: all routers have complete topology, link cost info</p><ul><li><p>&ldquo;link state&rdquo; algorithm</p><p>e.g. Dijkstra</p></li></ul></li><li><p>decentralized: iterative process of computation, exchange of info with neighbors</p></li><li><p>router initially only know link costs to attached neighbors</p></li><li><p>&ldquo;distance vector&rdquo; algorithms</p></li></ul><p>pers2</p><ul><li>static: routes change slowly over time</li><li>dynamic: routes change more quickly<ul><li>periodic updates or in response to link cost changes</li></ul></li></ul><h4 id=scalable-routing>scalable routing</h4><p>aggregate routers into regions known as &ldquo;autonomous systems&rdquo;(AS) (a.k.a &ldquo;domains&rdquo;)</p><h5 id=intra-as-intra-domain>intra-AS (&ldquo;intra-domain&rdquo;)</h5><p>routing among routers within same AS (&ldquo;netwrok&rdquo;)</p><ul><li>all routers in AS must run same intra-domain protocol</li><li>routers in different AS can run different intra-domain routing protocols</li><li>gateway router: at &ldquo;edge&rdquo; of its own AS, has link(s) to router(s) in other AS&rsquo;es</li></ul><p>most common intra-AS routing protocols</p><ul><li>RIP routing information protocol</li><li>OSPF open shortest path first</li><li>EIGRP enhanced interior gateway routing protocol</li></ul><h5 id=inter-as-inter-domain>inter-AS (&ldquo;inter-domain&rdquo;)</h5><p>routing among AS&rsquo;es</p><ul><li>gateways perform inter-domian routing</li></ul><p>BGP( Border Gateway Protocol): the de facto inter-domain routing protocol</p><ul><li>allows subnet to advertise its exsistence, and the destinations it can reach, to rest of Internet</li><li>BGP provides each AS a means to:<ul><li>obtain destination network reachability info from neighboring ASes (eBGP)</li><li>determine routes to other networks based on reachability infomation and policy</li><li>propagate reachability information to all AS-internal routers (iBGP)</li><li>advertise (to neighboring) destination reachability info</li></ul></li></ul><h3 id=icmp>ICMP</h3><p>internet control message protocol</p><ul><li>used by hosts and routers to communicate network-level information<ul><li>error reporting: unreachable host, network, port, protocol</li><li>echo request/reply (used by ping)</li></ul></li><li>network layer &ldquo;above&rdquo; IP:<ul><li>ICMP messages carried in IP datagrams, protocol number: 1</li></ul></li><li>ICMP message: type, code plus header and first 8 bytes of IP datagram causing error</li></ul><p><img src=https://i.ibb.co/qrWz8r4/image-20221024152736352.png loading=lazy alt=image-20221024152736352></p><h2 id=lecture-6-link-layer>Lecture 6 (Link-Layer)</h2><h3 id=terminology>Terminology</h3><ul><li><p>nodes</p><p>hosts, routers</p></li><li><p>links</p><p>communication channels that directly connect physically adjacent nodes</p><ul><li>wired, wireless</li><li>LANs</li></ul></li><li><p>frame</p><p>layer-2 packet encapsulates datagram</p></li></ul><h3 id=context>Context</h3><ul><li>datagram transferred by different link protocols over different links<ul><li>e.g. WiFi on first link, Ethernet on next link</li></ul></li><li>each link protocol provides different services<ul><li>e.g. may or may not provide reliable data tranfer over link</li></ul></li></ul><h3 id=services-1>Services</h3><ul><li>framing, link access<ul><li>encapsulate datagram into frame, adding header, trailer</li><li>channel access if shared medium</li><li>&ldquo;MAC&rdquo; accesses in frame headers identify source, destination</li></ul></li><li>reliable delivery between adjacent nodes</li><li>flow control<ul><li>pacing between adjacent sending and receiving nodes</li></ul></li><li>error detection<ul><li>error caused by signal attenuation, noise</li><li>receiver detects errors, signals retranssmision, or drop frame</li></ul></li><li>error correction<ul><li>receiver identifies and corrects bit error(s) without retransmission</li></ul></li><li>half-duplex and full-duplex<ul><li>with half duplex, nodes at both ends of link can transmit, but not at same time</li></ul></li></ul><h3 id=implementation>implementation</h3><ul><li>in each-and-every host</li><li>link layer implemented on-chip or in network interface card(NIC)</li><li>attaches into host&rsquo;s system buses</li><li>combination of hardware, software, firmware</li></ul><p><img src=https://i.ibb.co/T84bLZc/image-20221024194755683.png loading=lazy alt=image-20221024194755683></p><h3 id=mac-addresses>MAC addresses</h3><ul><li>used &ldquo;locally&rdquo; to get frame from one interface to another physically connected interface</li><li>48-bits MAC address burned in NIC ROM ,also sometimes software settable</li><li>MAC address allocation administered by IEEEE</li><li>manufacturer buys portion of MAC address space (to assure uniqueness)</li><li>analogy<ul><li>MAC address: like social security number</li><li>IP address: like postal address</li></ul></li><li>MAC flat address: portability<ul><li>can move interface from one LAN to another</li><li>recall IP address not portable: depends on IP subnet to which node is attac</li></ul></li></ul><p>each interface on LAN</p><ul><li>has unique 48-bit MAC address</li><li>has a locally unique 32-bit IP address</li></ul><h3 id=multiple-access-links>Multiple access links</h3><ul><li>point to point<ul><li>point-to-point link between Ethernet switch, host</li><li>PPP for dial-up access</li></ul></li><li>broadcast( shared wire or medium)<ul><li>old-school Ethernet</li><li>upstream HFC in cable-based access network</li><li>802.11 wireless LAN, 4G/5G. satellite</li></ul></li></ul><h3 id=multiple-access-protocols>Multiple access protocols</h3><p>why</p><ul><li><p>single shared broadcast channel</p></li><li><p>two or more simultaneous transmissions by nodes: interference</p><ul><li>collision if node receives two or more signals at the same time</li></ul></li><li><p>distributed algorithm that determines how nodes share channel, i.e. ,determine which node can transmit</p></li><li><p>communication about channel sharing must use channel itself</p><ul><li>no out-of-band channel for coordination</li></ul></li></ul><h4 id=taxonomy>taxonomy</h4><ul><li>taking turns<ul><li>nodes take turns, but nodes with more to send can take longer turns</li></ul></li><li>random access<ul><li>channel not divided, allow collisions</li><li>&ldquo;recover&rdquo; from collisions</li></ul></li><li>channel partitioning<ul><li>divide channel into smaller &ldquo;pieces&rdquo; (time slots, frequency, code)</li><li>allocate piece to node for exclusive use</li></ul></li></ul><h4 id=channel-partitioning>channel partitioning</h4><h5 id=tdma>TDMA</h5><p>time division multiple access</p><ul><li>access to channel in &ldquo;rounds&rdquo;</li><li>each station gets fixed length slot (length= packet transmission time) in each round</li><li>unused slots go idle</li></ul><p><img src=https://i.ibb.co/fHYXp8G/image-20221025151506652.png loading=lazy alt=image-20221025151506652></p><h5 id=fdma>FDMA</h5><p>frequency division multiple access</p><ul><li>channel spectrum divided into frequency bands</li><li>each station assigned fixed frequency band</li><li>unused transmission time in frequency bands go idle</li></ul><p><img src=https://i.ibb.co/HTLMNLx/image-20221025151446703.png loading=lazy alt=image-20221025151446703></p><h4 id=random-access>Random access</h4><ul><li>when node has packet to send<ul><li>transmit at full channel data rate R</li><li>no a priori coordination among nodes</li></ul></li><li>two+ sending nodes: &ldquo;collision&rdquo;</li><li>random access protocol specifies:<ul><li>when to send</li><li>how to detect collisions</li><li>how to recover from collisions (e.g., via delayed retransmissions)</li></ul></li><li>examples<ul><li>ALOHA</li><li>CSMA, CSMA/CD, CSMA/CA</li></ul></li></ul><h5 id=slotted-aloha>Slotted ALOHA</h5><ul><li><p>allow collision to happen (and then recover via retransmission)</p></li><li><p>use randomization in choosing when to retransmit</p></li><li><p>setting</p><ul><li>all frames same size</li><li>time divided into equal size slots (time to transmit 1 frame)</li><li>nodes are synchronized</li><li>nodes begin transmissions (if any) at slot start times</li><li>if 2 or more nodes transmit in slot, collision detected by sender</li></ul></li><li><p>operation</p><ul><li>when node has new frame to send, transmit in next slot<ul><li>if no collision: success</li><li>if collision: node retransmits frame in each subsequent slot with probability p until success</li></ul></li></ul></li><li><p>Pros</p><ul><li>single active node can continuously transmit at full rate of channel</li><li>highly decentralized: only slots in nodes need to be in sync</li><li>simple</li></ul></li><li><p>Cons</p><ul><li>synchronization</li><li>collision, &ldquo;wasting&rdquo; slots</li><li>idle slots, &ldquo;wasting&rdquo; slots</li></ul></li><li><p>efficiency: long-run fraction of successful slots (many nodes, all with many frames to send)</p><p>&mldr;</p><p>at best 37%</p></li></ul><h5 id=csma>CSMA</h5><p>carrier sense multiple access</p><ul><li><p>sinle CSMA</p><p>listen before transmit</p><ul><li>if channel sensed idel: transmit entire frame</li><li>if channel sensed busy: defer transmission</li></ul></li><li><p>CSMA/CD</p><p>CSMA with collision detection</p><ul><li><p>collisions detected within short time</p></li><li><p>colliding transmissions aborted, reducing channel wastage</p></li><li><p>collision detection easy in wired, difficult with wireless</p></li><li><p>reduces the amount of time wasted in collisions</p></li><li><p>algorithm</p><ul><li><p>Ethernet receives datagram form network layer, creates frame</p></li><li><p>if Ethernet senses channel:</p><p>if idle: start frame transmission</p><p>if busy: wait until channel idle, then transmit</p></li><li><p>if entire frame transmitted without collision: done</p></li><li><p>if another transmission detected while sending: abort, send jam signal</p></li><li><p>after aborting, entire binary (enponential) backoff:</p><p>after mth collision, chooses K at random from {0,1,2,&mldr;,2^m-1}. NIC waits K*512 bit times, returns to step 2</p><p>more collisions: longer backoff interval</p></li></ul></li></ul></li></ul><h6 id=collisions>collisions</h6><ul><li>collision can still occur with carrier sensing:<ul><li>propagation delay means two nodes may not hear each other&rsquo;s just started transmission</li></ul></li><li>collision: entire packet transmission time wasted<ul><li>distance & propagation delay play role in determining collision probability</li></ul></li></ul><h4 id=taking-turns>taking turns</h4><ul><li>channel allocated explicitly</li><li>nodes won&rsquo;t hold channel for long if nothing to send</li><li>two approaches: polling, token passing</li></ul><h5 id=polling>polling</h5><ul><li>centralized controller uses polling messages to &ldquo;invite&rdquo; client nodes to transmit in turn</li></ul><h5 id=token-passing>token passing</h5><ul><li>control token message explicitly passed from one node to next, sequentially</li><li>transmit while holding token</li></ul><h3 id=arp>ARP</h3><p>address resolution protocol</p><p>ARP table: each IP node (host, router) on LAN has table</p><ul><li><p>IP/MAC address mappings for some LAN nodes:</p><p>&lt;IP,MAC,TTL></p><ul><li>TTL(time to live): time after which address mapping will be forgotten (typically 20 min)</li></ul></li></ul><h3 id=ethernet>Ethernet</h3><p>&ldquo;dominant&rdquo; wired LAN technology</p><ul><li>first widely used LAN technology</li><li>simpler, cheap</li><li>kept up with speed race: 10Mbps- 400 Gbps</li><li>single chip, multiple speeds (e.g., Broadcom BCM5761)</li></ul><h4 id=topology>topology</h4><ul><li>bus<ul><li>popular through mid 90s</li><li>all nodes ihn same collision domain (can collide with each other)</li></ul></li><li>switched<ul><li>prevails today</li><li>active link-layer 2 switch in center</li><li>each &ldquo;spoke&rdquo; run a (seperate) Ethernet protocol (nodes do not collide with each other)</li></ul></li></ul><p><img src=https://i.ibb.co/bRf0WwD/image-20221025161439993.png loading=lazy alt=image-20221025161439993></p><h4 id=frame-structure>frame structure</h4><p>sending interface encapsulates IP datagram (or other network layer protocol packet) in Ethernet frame</p><p><img src=https://i.ibb.co/16gt5tG/image-20221025161546416.png loading=lazy alt=image-20221025161546416></p><ul><li><p>preamble</p><ul><li>used to synchronize receiver, sender clock rates</li><li>7 bytes of 10101010 followed by one byte of 10101011</li></ul></li><li><p>dest. source address</p><p>6 byte mac address</p><ul><li>if adapter receives frame with matching destination address, or with broadcast address (e.g., ARP packet), it passes data in frame to network layer protocol</li><li>otherwise, adapter discards frame</li></ul></li><li><p>type</p><ul><li>indicates higher layer protocol</li><li>mostly IP but others possible e.g., Novell IPX, AppleTalk</li><li>used to demultiplex up at receiver</li></ul></li><li><p>CRC</p><p>cyclic redundancy check at receiver</p><ul><li>error detected: frame is dropped</li></ul></li></ul><h4 id=feature>feature</h4><ul><li><p>connectionless: no handshaking between sending and receiving NICs</p></li><li><p>unreliable: receiving NIC doesn&rsquo;t send ACKs or NAKs to sending NIC</p><p>data in dropped frames recovered only if initial sender uses higher layer rdt (e.g. TCP), otherwise dropped data lost</p></li><li><p>MAC protocol: unslotted CSMA/CD with binary backoff</p></li></ul><h4 id=standards>standards</h4><p>standards:link & physical layers</p><p>many different Ethernet standards</p><ul><li>common MAC protocol and frame format</li><li>different speeds: 2Mbps, 10Mbps, 100Mbps&mldr;</li><li>different physical layer media: fiber, cable</li></ul><p><img src=https://i.ibb.co/jDgXkq6/image-20221025162853104.png loading=lazy alt=image-20221025162853104></p><h3 id=switch>Switch</h3><p>link-layer device: take an active role</p><ul><li><p>store, forward Ethernet frames</p></li><li><p>examine incoming frame&rsquo;s MAC address, selectively forward frame to one-or-more outgoing links when frame is to be forwarded on segment, uses CSMA/CD to access segment</p></li><li><p>transparent</p><p>hosts unaware of presence of switches</p></li><li><p>plug-and-play, self-learning
don&rsquo;t need to be configured</p></li></ul><h4 id=multiple-simultaneous-transmissions>multiple simultaneous transmissions</h4><ul><li>hosts have dedicated, direct connection to switch</li><li>switches buffer packets</li><li>Ethernet protocol used on each incoming link, so:<ul><li>no collisions; full duplex</li><li>each link is tis own collision domain</li></ul></li></ul><h4 id=self-learning>self-learning</h4><ul><li><p>map host and mac address by link and source address in frame</p></li><li><p>frame destination location known</p><p>selectively send</p></li><li><p>frame destination location unknown</p><p>flood</p></li></ul><h3 id=vlan>VLAN</h3><p>motivation</p><ul><li>single broadcast domain<ul><li>scaling</li><li>efficiency, security, privacy, efficiency issues</li></ul></li><li>administrative issues</li></ul><p>definition</p><p>switch supporting VLAN capabilities can be configured to define multiple virtual LANs over single physical LAN infrastructure</p><h4 id=port-based-vlans>Port-based VLANs</h4><p>switch ports grouped (by switch management software) so that single physical switch operates as multiple virtual switches</p><p><img src=https://i.ibb.co/j3mqd2n/image-20221025165500032.png loading=lazy alt=image-20221025165500032></p></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Jun 06, 2023 00:00 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/software-architecturenotes/><div class=article-details><h2 class=article-title>【Software Architecture】Notes</h2></div></a></article><article><a href=/p/computer-architecturenotes/><div class=article-details><h2 class=article-title>【Computer Architecture】Notes</h2></div></a></article><article><a href=/p/computer-visionnotes/><div class=article-details><h2 class=article-title>【Computer Vision】Notes</h2></div></a></article><article><a href=/p/stanford-compilersnotes/><div class=article-details><h2 class=article-title>【Stanford Compilers】Notes</h2></div></a></article><article><a href=/p/stanford-reinforcement-learningnotes/><div class=article-details><h2 class=article-title>【Stanford Reinforcement Learning】Notes</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 飞鸿踏雪泥</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>