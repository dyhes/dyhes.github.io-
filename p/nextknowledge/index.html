<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="fromSomeBlog We create a dynamic URL by creating a dynamic page with the [] syntax.\nHow? We add a pages/blog/[id].js file. This file will handle all the dynamic URLs under the /blog/ route\nThe router is a library provided by Next.js.\nWe import it from next/router:\nimport { useRouter } from 'next/router' and once we have useRouter, we instantiate the router object using:\nconst router = useRouter() Once we have this router object, we can extract information from it.\n"><title>【Next】Knowledge</title>
<link rel=canonical href=https://dyhes.github.io/p/nextknowledge/><link rel=stylesheet href=/scss/style.min.6aa4d43a5cae1c51ef34b3f851ae7421f4b2f2d13827e2d975acbeb4f13c8710.css><meta property='og:title' content="【Next】Knowledge"><meta property='og:description' content="fromSomeBlog We create a dynamic URL by creating a dynamic page with the [] syntax.\nHow? We add a pages/blog/[id].js file. This file will handle all the dynamic URLs under the /blog/ route\nThe router is a library provided by Next.js.\nWe import it from next/router:\nimport { useRouter } from 'next/router' and once we have useRouter, we instantiate the router object using:\nconst router = useRouter() Once we have this router object, we can extract information from it.\n"><meta property='og:url' content='https://dyhes.github.io/p/nextknowledge/'><meta property='og:site_name' content='飞鸿踏雪泥'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='React'><meta property='article:published_time' content='2021-05-26T00:00:00+00:00'><meta property='article:modified_time' content='2021-05-26T00:00:00+00:00'><meta name=twitter:title content="【Next】Knowledge"><meta name=twitter:description content="fromSomeBlog We create a dynamic URL by creating a dynamic page with the [] syntax.\nHow? We add a pages/blog/[id].js file. This file will handle all the dynamic URLs under the /blog/ route\nThe router is a library provided by Next.js.\nWe import it from next/router:\nimport { useRouter } from 'next/router' and once we have useRouter, we instantiate the router object using:\nconst router = useRouter() Once we have this router object, we can extract information from it.\n"><link rel="shortcut icon" href=/github.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu17834253352308399148.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>飞鸿踏雪泥</a></h1><h2 class=site-description>没有记录，就没有发生</h2></div></header><ol class=menu-social><li><a href=https://github.com/dyhes target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:dyheslin@gmail.com target=_blank title=Gmail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-gmail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 20h3a1 1 0 001-1V5a1 1 0 00-1-1h-3v16z"/><path d="M5 20h3V4H5A1 1 0 004 5v14a1 1 0 001 1z"/><path d="M16 4l-4 4-4-4"/><path d="M4 6.5l8 7.5 8-7.5"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/categories/><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#fromsomeblog>fromSomeBlog</a></li><li><a href=#fromofficialwebsite>fromOfficialWebsite</a><ol><li><a href=#link>Link</a></li><li><a href=#image>Image</a></li><li><a href=#head>Head</a></li><li><a href=#script>Script</a></li><li><a href=#css-modules>CSS Modules</a><ol><li><a href=#global-modules>Global Modules</a></li></ol></li></ol></li><li><a href=#pre-rendering>Pre-rendering</a><ol><li><a href=#getstaticprops>getStaticProps</a></li><li><a href=#pre-rendering-and-data-fetching>Pre-rendering and Data Fetching</a></li><li><a href=#fetching-data-at-request-time>Fetching Data at Request Time</a><ol><li><a href=#using-getserversideprops>Using <code>getServerSideProps</code></a></li><li><a href=#client-side-rendering>Client-side Rendering</a></li><li><a href=#swr>SWR</a></li><li><a href=#catch-all-routes>Catch-all Routes</a></li></ol></li><li><a href=#api-routers>API routers</a></li><li><a href=#deploy-to-vercel>Deploy to Vercel</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/nutrition/ style=background-color:#93b5cf;color:>积雪粮
</a><a href=/categories/grass/ style=background-color:#41b349;color:>一川烟草</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/nextknowledge/>【Next】Knowledge</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 26, 2021</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>8 minute read</time></div></footer></div></header><section class=article-content><h2 id=fromsomeblog>fromSomeBlog</h2><p>We create a dynamic URL by creating a dynamic page with the <code>[]</code> syntax.</p><p>How? We add a <code>pages/blog/[id].js</code> file. This file will handle all the dynamic URLs under the <code>/blog/</code> route</p><p>The router is a library provided by Next.js.</p><p>We import it from <code>next/router</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useRouter</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;next/router&#39;</span>
</span></span></code></pre></div><p>and once we have <code>useRouter</code>, we instantiate the router object using:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>useRouter</span><span class=p>()</span>
</span></span></code></pre></div><p>Once we have this router object, we can extract information from it.</p><p>In particular we can get the dynamic part of the URL in the <code>[id].js</code> file by accessing <code>router.query.id</code>.</p><p>The dynamic part can also just be a portion of the URL, like <code>post-[id].js</code>.</p><p>So let&rsquo;s go on and apply all those things in practice.</p><p>Create the file <code>pages/blog/[id].js</code></p><p>Create the file <code>pages/blog/[id].js</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useRouter</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;next/router&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>router</span> <span class=o>=</span> <span class=nx>useRouter</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Blog</span> <span class=nx>post</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span><span class=nx>Post</span> <span class=nx>id</span><span class=o>:</span> <span class=p>{</span><span class=nx>router</span><span class=p>.</span><span class=nx>query</span><span class=p>.</span><span class=nx>id</span><span class=p>}&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=fromofficialwebsite>fromOfficialWebsite</h2><h3 id=link>Link</h3><p>If you need to link to an <em>external</em> page outside the Next.js app, just use an <code>&lt;a></code> tag without <code>Link</code>.</p><p>If you need to add attributes like, for example, <code>className</code>, add it to the <code>a</code> tag, <em>not</em> to the <code>Link</code> tag</p><p>In Next.js, a <strong>page</strong> is a <a class=link href=https://reactjs.org/docs/components-and-props.html target=_blank rel=noopener>React Component</a> exported from a <code>.js</code>, <code>.jsx</code>, <code>.ts</code>, or <code>.tsx</code> file in the <code>pages</code> directory. Each page is associated with a route based on its file name.</p><p>Next.js can serve <strong>static assets</strong>, like images, under <strong>the top-level <a class=link href=https://nextjs.org/docs/basic-features/static-file-serving target=_blank rel=noopener><code>public</code> directory</a></strong>. Files inside <code>public</code> can be referenced from the root of the application similar to <a class=link href=https://nextjs.org/docs/basic-features/pages target=_blank rel=noopener><code>pages</code></a>.</p><h3 id=image>Image</h3><p>Using primitive html image tag means you have to manually handle:</p><ul><li>Ensuring your image is responsive on different screen sizes</li><li>Optimizing your images with a third-party tool or library</li><li>Only loading images when they enter the viewport</li></ul><p>And more. Instead, Next.js provides an <code>Image</code> component out of the box to handle this for you.</p><p>Images are lazy loaded by default. That means your page speed isn&rsquo;t penalized for images outside the viewport. Images load as they are scrolled into viewport.</p><p>(the url didn&rsquo;t include public)</p><h3 id=head>Head</h3><p>In addition to metadata, scripts that need to load and execute as soon as possible are usually added within the <code>&lt;head></code> of a page. Using a regular HTML <code>&lt;script></code> element, an external script would be added as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>First Post<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://connect.facebook.net/en_US/sdk.js&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=script>Script</h3><p><a class=link href=https://nextjs.org/docs/api-reference/next/script target=_blank rel=noopener><code>next/script</code></a> is an extension of the HTML <code>&lt;script></code> element and optimizes when additional scripts are fetched and executed.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=nx>FirstPost</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span><span class=nx>First</span> <span class=nx>Post</span><span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>Head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Script</span>
</span></span><span class=line><span class=cl>        <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://connect.facebook.net/en_US/sdk.js&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>strategy</span><span class=o>=</span><span class=s>&#34;lazyOnload&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>onLoad</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`script loaded correctly, window.FB has been populated`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>First</span> <span class=nx>Post</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>a</span><span class=p>&gt;</span><span class=nx>Back</span> <span class=nx>to</span> <span class=nx>home</span><span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>Link</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Notice that a few additional properties have been defined in the Script component:</p><ul><li><code>strategy</code> controls when the third-party script should load. A value of <code>lazyOnload</code> tells Next.js to load this particular script lazily during browser idle time</li><li><code>onLoad</code> is used to run any JavaScript code immediately after the script has finished loading. In this example, we log a message to the console that mentions that the script has loaded correctly</li></ul><h3 id=css-modules>CSS Modules</h3><p><strong>Important:</strong> To use <a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-component-level-css target=_blank rel=noopener>CSS Modules</a>, the CSS file name must end with <code>.module.css</code>.</p><p>This is what <a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-component-level-css target=_blank rel=noopener>CSS Modules</a> does: <em>It automatically generates unique class names</em>. As long as you use CSS Modules, you don’t have to worry about class name collisions.</p><p>Furthermore, Next.js’s code splitting feature works on <a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-component-level-css target=_blank rel=noopener>CSS Modules</a> as well. It ensures the minimal amount of CSS is loaded for each page. This results in smaller bundle sizes.</p><p><a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-component-level-css target=_blank rel=noopener>CSS Modules</a> are extracted from the JavaScript bundles at build time and generate <code>.css</code> files that are loaded automatically by Next.js.</p><h4 id=global-modules>Global Modules</h4><p><a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-component-level-css target=_blank rel=noopener>CSS Modules</a> are useful for component-level styles. But if you want some CSS to be loaded by <strong>every page</strong>, Next.js has support for that as well.</p><p>To load <a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-a-global-stylesheet target=_blank rel=noopener>global CSS</a> files, <strong>create a file called <a class=link href=https://nextjs.org/docs/advanced-features/custom-app target=_blank rel=noopener><code>pages/_app.js</code></a></strong> with the following content:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=kd>function</span> <span class=nx>App</span><span class=p>({</span> <span class=nx>Component</span><span class=p>,</span> <span class=nx>pageProps</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>Component</span> <span class=p>{</span><span class=na>...pageProps</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This <code>App</code> component is the top-level component which will be common across all the different pages. You can use this <code>App</code> component to keep state when navigating between pages</p><p><strong>Important:</strong> You need to restart the development server when you add <a class=link href=https://nextjs.org/docs/advanced-features/custom-app target=_blank rel=noopener><code>pages/_app.js</code></a>.</p><p>In Next.js, you can add <a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-a-global-stylesheet target=_blank rel=noopener>global CSS</a> files by importing them from <a class=link href=https://nextjs.org/docs/advanced-features/custom-app target=_blank rel=noopener><code>pages/_app.js</code></a>. You <strong>cannot</strong> import global CSS anywhere else.</p><p>The reason that <a class=link href=https://nextjs.org/docs/basic-features/built-in-css-support#adding-a-global-stylesheet target=_blank rel=noopener>global CSS</a> can&rsquo;t be imported outside of <code>pages/_app.js</code> is that global CSS affects all elements on the page.</p><p>You can place the global CSS file anywhere and use any name. So let’s do the following:</p><ul><li>Create a top-level <code>styles</code> directory and create <code>global.css</code> inside.</li></ul><h2 id=pre-rendering>Pre-rendering</h2><p>Next.js has two forms of pre-rendering: <a class=link href=https://nextjs.org/docs/basic-features/pages#static-generation-recommended target=_blank rel=noopener><strong>Static Generation</strong></a> and <a class=link href=https://nextjs.org/docs/basic-features/pages#server-side-rendering target=_blank rel=noopener><strong>Server-side Rendering</strong></a>. The difference is in <strong>when</strong> it generates the HTML for a page.</p><ul><li><a class=link href=https://nextjs.org/docs/basic-features/pages#static-generation-recommended target=_blank rel=noopener><strong>Static Generation</strong></a> is the pre-rendering method that generates the HTML at <strong>build time</strong>. The pre-rendered HTML is then <em>reused</em> on each request.</li><li><a class=link href=https://nextjs.org/docs/basic-features/pages#server-side-rendering target=_blank rel=noopener><strong>Server-side Rendering</strong></a> is the pre-rendering method that generates the HTML on <strong>each request</strong>.</li></ul><p>In development mode (when you run <code>npm run dev</code> or <code>yarn dev</code>), every page is <a class=link href=https://nextjs.org/docs/basic-features/pages#pre-rendering target=_blank rel=noopener>pre-rendered</a> on each request — even for pages that use <a class=link href=https://nextjs.org/docs/basic-features/pages#static-generation-recommended target=_blank rel=noopener>Static Generation</a>.</p><p>in Next.js, when you export a page component, you can also export an <code>async</code> function called <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a>.</p><h3 id=getstaticprops>getStaticProps</h3><ul><li>In <strong>development</strong> (<code>npm run dev</code> or <code>yarn dev</code>), <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> runs on <em>every request</em>.</li><li>In <strong>production</strong>, <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> runs at <em>build time</em>. However, this behavior can be enhanced using the <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#the-fallback-key-required target=_blank rel=noopener><code>fallback</code> key</a> returned by <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticpaths-static-generation target=_blank rel=noopener><code>getStaticPaths</code></a></li></ul><p>If you need to fetch data at <strong>request time</strong> instead of at build time, you can try <a class=link href=https://nextjs.org/docs/basic-features/pages#server-side-rendering target=_blank rel=noopener><strong>Server-side Rendering</strong></a></p><p>To use <a class=link href=https://nextjs.org/docs/basic-features/pages#server-side-rendering target=_blank rel=noopener>Server-side Rendering</a>, you need to export <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering target=_blank rel=noopener><code>getServerSideProps</code></a> instead of <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> from your page.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>async</span> <span class=kd>function</span> <span class=nx>getServerSideProps</span><span class=p>(</span><span class=nx>context</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>props</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// props for your component
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Because <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering target=_blank rel=noopener><code>getServerSideProps</code></a> is called at request time, its parameter (<code>context</code>) contains request specific parameters.</p><p>You should use <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering target=_blank rel=noopener><code>getServerSideProps</code></a> only if you need to pre-render a page whose data must be fetched at request time. Time to first byte (<a class=link href=https://web.dev/time-to-first-byte/ target=_blank rel=noopener>TTFB</a>) will be slower than <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> because the server must compute the result on every request, and the result cannot be cached by a <a class=link href=https://vercel.com/docs/edge-network/overview target=_blank rel=noopener>CDN</a> without extra configuration.</p><p>If you <strong>do not</strong> need to pre-render the data, you can also use the following strategy (called <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#fetching-data-on-the-client-side target=_blank rel=noopener><strong>Client-side Rendering</strong></a>):</p><ul><li>Statically generate (pre-render) parts of the page that do not require external data.</li><li>When the page loads, fetch external data from the client using JavaScript and populate the remaining parts.</li></ul><h3 id=pre-rendering-and-data-fetching>Pre-rendering and Data Fetching</h3><p><a class=link href=https://nextjs.org/learn/basics/data-fetching target=_blank rel=noopener>1</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/setup target=_blank rel=noopener>2</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/pre-rendering target=_blank rel=noopener>3</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/two-forms target=_blank rel=noopener>4</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/with-data target=_blank rel=noopener>5</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/blog-data target=_blank rel=noopener>6</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/implement-getstaticprops target=_blank rel=noopener>7</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/getstaticprops-details target=_blank rel=noopener>8</a></p><p><a class=link href=https://nextjs.org/learn/basics/data-fetching/request-time target=_blank rel=noopener>9</a></p><h3 id=fetching-data-at-request-time>Fetching Data at Request Time</h3><p>If you need to fetch data at <strong>request time</strong> instead of at build time, you can try <a class=link href=https://nextjs.org/docs/basic-features/pages#server-side-rendering target=_blank rel=noopener><strong>Server-side Rendering</strong></a>:</p><p><img src=https://nextjs.org/static/images/learn/data-fetching/server-side-rendering-with-data.png loading=lazy alt="Server-side Rendering"></p><p>To use <a class=link href=https://nextjs.org/docs/basic-features/pages#server-side-rendering target=_blank rel=noopener>Server-side Rendering</a>, you need to export <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering target=_blank rel=noopener><code>getServerSideProps</code></a> instead of <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> from your page.</p><h4 id=using-getserversideprops>Using <code>getServerSideProps</code></h4><p>Here’s the starter code for <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering target=_blank rel=noopener><code>getServerSideProps</code></a>. It’s not necessary for our blog example, so we won’t be implementing it.</p><pre tabindex=0><code>export async function getServerSideProps(context) {
  return {
    props: {
      // props for your component
    }
  }
}
</code></pre><p>Because <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering target=_blank rel=noopener><code>getServerSideProps</code></a> is called at request time, its parameter (<code>context</code>) contains request specific parameters.</p><p>You should use <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering target=_blank rel=noopener><code>getServerSideProps</code></a> only if you need to pre-render a page whose data must be fetched at request time. Time to first byte (<a class=link href=https://web.dev/time-to-first-byte/ target=_blank rel=noopener>TTFB</a>) will be slower than <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> because the server must compute the result on every request, and the result cannot be cached by a <a class=link href=https://vercel.com/docs/edge-network/overview target=_blank rel=noopener>CDN</a> without extra configuration.</p><h4 id=client-side-rendering>Client-side Rendering</h4><p>If you <strong>do not</strong> need to pre-render the data, you can also use the following strategy (called <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#fetching-data-on-the-client-side target=_blank rel=noopener><strong>Client-side Rendering</strong></a>):</p><ul><li>Statically generate (pre-render) parts of the page that do not require external data.</li><li>When the page loads, fetch external data from the client using JavaScript and populate the remaining parts.</li></ul><p><img src=https://nextjs.org/static/images/learn/data-fetching/client-side-rendering.png loading=lazy alt="Client-side Rendering"></p><p>This approach works well for user dashboard pages, for example. Because a dashboard is a private, user-specific page, SEO is not relevant, and the page doesn’t need to be <a class=link href=https://nextjs.org/docs/basic-features/pages#pre-rendering target=_blank rel=noopener>pre-rendered</a>. The data is frequently updated, which requires request-time data fetching.</p><h4 id=swr>SWR</h4><p>The team behind Next.js has created a React hook for data fetching called <a class=link href=https://swr.vercel.app/ target=_blank rel=noopener><strong>SWR</strong></a>. We highly recommend it if you’re fetching data on the client side. It handles caching, revalidation, focus tracking, refetching on interval, and more. We won’t cover the details here, but here’s an example usage:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>useSWR</span> <span class=nx>from</span> <span class=s1>&#39;swr&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Profile</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>data</span><span class=p>,</span> <span class=nx>error</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>useSWR</span><span class=p>(</span><span class=s1>&#39;/api/user&#39;</span><span class=p>,</span> <span class=nx>fetch</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>failed</span> <span class=nx>to</span> <span class=nx>load</span><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>data</span><span class=p>)</span> <span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>loading</span><span class=p>...&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>hello</span> <span class=p>{</span><span class=nx>data</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>!</span><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=catch-all-routes>Catch-all Routes</h4><p>Dynamic routes can be extended to catch all paths by adding three dots (<code>...</code>) inside the brackets.</p><h3 id=api-routers>API routers</h3><p>You should <strong>not</strong> fetch an API Route from <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> or <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticpaths-static-generation target=_blank rel=noopener><code>getStaticPaths</code></a>. Instead, write your server-side code directly in <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> or <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticpaths-static-generation target=_blank rel=noopener><code>getStaticPaths</code></a> (or call a helper function).</p><p>Here’s why: <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation target=_blank rel=noopener><code>getStaticProps</code></a> and <a class=link href=https://nextjs.org/docs/basic-features/data-fetching#getstaticpaths-static-generation target=_blank rel=noopener><code>getStaticPaths</code></a> runs only on the server-side. It will never be run on the client-side. It won’t even be included in the JS bundle for the browser. That means you can write code such as direct database queries without them being sent to browsers.</p><p>A good use case for API Routes is handling form input. For example, you can create a form on your page and have it send a <code>POST</code> request to your API Route. You can then write code to directly save it to your database. The API Route code will not be part of your client bundle, so you can safely write server-side code.</p><h3 id=deploy-to-vercel>Deploy to Vercel</h3><p>The easiest way to deploy Next.js to production is to use the <strong><a class=link href=https://vercel.com/ target=_blank rel=noopener>Vercel</a></strong> platform developed by the creators of Next.js.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/react/>React</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on May 26, 2021 00:00 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/reactreactnode-vs-reactelement/><div class=article-details><h2 class=article-title>【React】ReactNode vs ReactElement</h2></div></a></article><article><a href=/p/antdbutton-htmltype/><div class=article-details><h2 class=article-title>【Antd】Button HtmlType</h2></div></a></article><article><a href=/p/antdform/><div class=article-details><h2 class=article-title>【Antd】Form</h2></div></a></article><article><a href=/p/fronturl-encoding/><div class=article-details><h2 class=article-title>【Front】URL encoding</h2></div></a></article><article><a href=/p/umitailwind/><div class=article-details><h2 class=article-title>【Umi】Tailwind</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 飞鸿踏雪泥</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>