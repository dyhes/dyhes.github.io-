<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="JSX JSX is a syntax extension to JavaScript. it is recomended to use with React to describe what the UI should look like. JSX may remind you of a template language, but it comes with the full power of JavaScript.\nSince JSX is closer to JavaScript than to HTML, React DOM uses camelCase property naming convention instead of HTML attribute names.\nBabel compiles JSX down to React.createElement() calls.\n//before const element = ( <h1 className=&#34;greeting&#34;> Hello, world! </h1> ); //after compilation const element = React.createElement( 'h1', {className: 'greeting'}, 'Hello, world!' ); In-depth Choosing the Type at Runtime\n"><title>【React】Basics</title>
<link rel=canonical href=https://dyhes.github.io/p/reactbasics/><link rel=stylesheet href=/scss/style.min.6aa4d43a5cae1c51ef34b3f851ae7421f4b2f2d13827e2d975acbeb4f13c8710.css><meta property='og:title' content="【React】Basics"><meta property='og:description' content="JSX JSX is a syntax extension to JavaScript. it is recomended to use with React to describe what the UI should look like. JSX may remind you of a template language, but it comes with the full power of JavaScript.\nSince JSX is closer to JavaScript than to HTML, React DOM uses camelCase property naming convention instead of HTML attribute names.\nBabel compiles JSX down to React.createElement() calls.\n//before const element = ( <h1 className=&#34;greeting&#34;> Hello, world! </h1> ); //after compilation const element = React.createElement( 'h1', {className: 'greeting'}, 'Hello, world!' ); In-depth Choosing the Type at Runtime\n"><meta property='og:url' content='https://dyhes.github.io/p/reactbasics/'><meta property='og:site_name' content='飞鸿踏雪泥'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='React'><meta property='article:published_time' content='2021-05-01T00:00:00+00:00'><meta property='article:modified_time' content='2021-05-01T00:00:00+00:00'><meta name=twitter:title content="【React】Basics"><meta name=twitter:description content="JSX JSX is a syntax extension to JavaScript. it is recomended to use with React to describe what the UI should look like. JSX may remind you of a template language, but it comes with the full power of JavaScript.\nSince JSX is closer to JavaScript than to HTML, React DOM uses camelCase property naming convention instead of HTML attribute names.\nBabel compiles JSX down to React.createElement() calls.\n//before const element = ( <h1 className=&#34;greeting&#34;> Hello, world! </h1> ); //after compilation const element = React.createElement( 'h1', {className: 'greeting'}, 'Hello, world!' ); In-depth Choosing the Type at Runtime\n"><link rel="shortcut icon" href=/github.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu17834253352308399148.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>飞鸿踏雪泥</a></h1><h2 class=site-description>没有记录，就没有发生</h2></div></header><ol class=menu-social><li><a href=https://github.com/dyhes target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:dyheslin@gmail.com target=_blank title=Gmail rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-gmail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 20h3a1 1 0 001-1V5a1 1 0 00-1-1h-3v16z"/><path d="M5 20h3V4H5A1 1 0 004 5v14a1 1 0 001 1z"/><path d="M16 4l-4 4-4-4"/><path d="M4 6.5l8 7.5 8-7.5"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/categories/><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>Categories</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#jsx>JSX</a><ol><li><a href=#in-depth>In-depth</a></li></ol></li><li><a href=#components>Components</a></li><li><a href=#lifecycle-methods>Lifecycle Methods</a></li><li><a href=#hooks>Hooks</a><ol><li><a href=#usestate><code>useState</code></a></li><li><a href=#useeffect><code>useEffect</code></a><ol><li><a href=#cleaning-up-an-effect>Cleaning up an effect</a></li><li><a href=#timing-of-effects>Timing of effects</a></li><li><a href=#conditionally-firing-an-effect>Conditionally firing an effect</a></li></ol></li><li><a href=#usecontext><code>useContext</code></a></li><li><a href=#rules-of-hooks>Rules of Hooks</a></li><li><a href=#custom-hooks>Custom Hooks</a></li></ol></li><li><a href=#lists>Lists</a></li><li><a href=#forms>Forms</a><ol><li><a href=#controlled-components>Controlled Components</a></li><li><a href=#uncontrolled-components>Uncontrolled Components</a></li></ol></li><li><a href=#lifting-state-up>Lifting state up</a></li><li><a href=#context>Context</a><ol><li><a href=#api>API</a><ol><li><a href=#reactcreatecontext><code>React.createContext</code></a></li><li><a href=#contextprovider><code>Context.Provider</code></a></li><li><a href=#classcontexttype><code>Class.contextType</code></a></li><li><a href=#contextconsumer><code>Context.Consumer</code></a></li><li><a href=#contextdisplayname><code>Context.displayName</code></a></li></ol></li></ol></li><li><a href=#error-boundaries>Error Boundaries</a></li><li><a href=#ref>Ref</a><ol><li><a href=#create>Create</a></li><li><a href=#access>Access</a></li><li><a href=#ref-forwarding>Ref forwarding</a></li><li><a href=#callback-refs>Callback Refs</a></li><li><a href=#legacy-api-string-refs>Legacy API: String Refs</a></li></ol></li><li><a href=#fragment>Fragment</a><ol><li><a href=#keyed-fragments>Keyed Fragments</a></li></ol></li><li><a href=#high-order-components>High-Order Components</a><ol><li><a href=#caveat>Caveat</a></li></ol></li><li><a href=#render-props>Render Props</a></li><li><a href=#strict-mode>Strict Mode</a></li><li><a href=#proptypes>PropTypes</a><ol><li><a href=#single-child>Single Child</a></li><li><a href=#default-prop-values>Default Prop Values</a></li><li><a href=#function-components>Function Components</a></li></ol></li><li><a href=#portals>Portals</a></li><li><a href=#profiler>Profiler</a></li><li><a href=#web-components>Web Components</a></li><li><a href=#optimizing-performance>Optimizing Performance</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/nutrition/ style=background-color:#93b5cf;color:>积雪粮
</a><a href=/categories/temple/ style=background-color:#69a794;color:>白玉京</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/reactbasics/>【React】Basics</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 01, 2021</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>36 minute read</time></div></footer></div></header><section class=article-content><h2 id=jsx>JSX</h2><p>JSX is a <strong>syntax extension</strong> to JavaScript. it is recomended to use with React to describe <strong>what the UI should look like</strong>. JSX may remind you of a template language, but it comes with the full power of JavaScript.</p><p>Since JSX is closer to JavaScript than to HTML, React DOM uses <code>camelCase</code> property naming convention instead of HTML attribute names.</p><p>Babel compiles JSX down to <code>React.createElement()</code> calls.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=c1>//before
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>element</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>h1</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;greeting&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nx>Hello</span><span class=p>,</span> <span class=nx>world</span><span class=o>!</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//after compilation
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>element</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;h1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>className</span><span class=o>:</span> <span class=s1>&#39;greeting&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;Hello, world!&#39;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h3 id=in-depth>In-depth</h3><ul><li><p>Choosing the Type at Runtime</p><p>You cannot use a general expression as the React element type. If you do want to use a general expression to indicate the type of the element, just assign it to a capitalized variable first. This often comes up when you want to render a different component based on a prop:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>PhotoStory</span><span class=p>,</span> <span class=nx>VideoStory</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;./stories&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>components</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>photo</span><span class=o>:</span> <span class=nx>PhotoStory</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>video</span><span class=o>:</span> <span class=nx>VideoStory</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Story</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Correct! JSX type can be a capitalized variable.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>SpecificStory</span> <span class=o>=</span> <span class=nx>components</span><span class=p>[</span><span class=nx>props</span><span class=p>.</span><span class=nx>storyType</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>SpecificStory</span> <span class=na>story</span><span class=o>=</span><span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>story</span><span class=p>}</span> <span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li><li><p>Props default to &rsquo;true'</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>MyTextBox</span> <span class=na>autocomplete</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>//equals to
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>MyTextBox</span> <span class=na>autocomplete</span><span class=o>=</span><span class=p>{</span><span class=kc>true</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p>In general, we don’t recommend <em>not</em> passing a value for a prop, because it can be confused with the <a class=link href=https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015 target=_blank rel=noopener>ES6 object shorthand</a> <code>{foo}</code> which is short for <code>{foo: foo}</code> rather than <code>{foo: true}</code>. This behavior is just there so that it matches the behavior of HTML.</p></li><li><p>Spread Attributes</p><p>In general, we don’t recommend <em>not</em> passing a value for a prop, because it can be confused with the <a class=link href=https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015 target=_blank rel=noopener>ES6 object shorthand</a> <code>{foo}</code> which is short for <code>{foo: foo}</code> rather than <code>{foo: true}</code>. This behavior is just there so that it matches the behavior of HTML.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kd>function</span> <span class=nx>App1</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>Greeting</span> <span class=na>firstName</span><span class=o>=</span><span class=s>&#34;Ben&#34;</span> <span class=na>lastName</span><span class=o>=</span><span class=s>&#34;Hector&#34;</span> <span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//equals to
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>App2</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>props</span> <span class=o>=</span> <span class=p>{</span><span class=nx>firstName</span><span class=o>:</span> <span class=s1>&#39;Ben&#39;</span><span class=p>,</span> <span class=nx>lastName</span><span class=o>:</span> <span class=s1>&#39;Hector&#39;</span><span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>Greeting</span> <span class=p>{</span><span class=na>...props</span><span class=p>}</span> <span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//eg2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>Button</span> <span class=o>=</span> <span class=nx>props</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>kind</span><span class=p>,</span> <span class=p>...</span><span class=nx>other</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>className</span> <span class=o>=</span> <span class=nx>kind</span> <span class=o>===</span> <span class=s2>&#34;primary&#34;</span> <span class=o>?</span> <span class=s2>&#34;PrimaryButton&#34;</span> <span class=o>:</span> <span class=s2>&#34;SecondaryButton&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>button</span> <span class=na>className</span><span class=o>=</span><span class=p>{</span><span class=nx>className</span><span class=p>}</span> <span class=p>{</span><span class=na>...other</span><span class=p>}</span> <span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div></li><li><p>Children</p><p>In JSX expressions that contain both an opening tag and a closing tag, the content between those tags is passed as a special prop: <code>props.children</code>.</p><ul><li><p><strong>Boolean</strong></p><p><code>false</code>, <code>null</code>, <code>undefined</code>, and <code>true</code> are valid children. They simply don’t render. This can be useful to conditionally render React elements.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>showHeader</span> <span class=o>&amp;&amp;</span> <span class=p>&lt;</span><span class=nt>Header</span> <span class=p>/&gt;}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>Content</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Conversely, if you want a value like false, true, null, or undefined to appear in the output, you have to convert it to a string first:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>My</span> <span class=nx>JavaScript</span> <span class=nx>variable</span> <span class=nx>is</span> <span class=p>{</span><span class=nb>String</span><span class=p>(</span><span class=nx>myVariable</span><span class=p>)}.</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div></li><li><p><strong>String Literals</strong></p><p>You can put a string between the opening and closing tags and <code>props.children</code> will just be that string. HTML is unescaped, so you can generally write JSX just like you would write HTML.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>MyComponent</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>This</span> <span class=nx>is</span> <span class=nx>valid</span> <span class=nx>HTML</span> <span class=o>&amp;</span><span class=nx>amp</span><span class=p>;</span> <span class=nx>JSX</span> <span class=nx>at</span> <span class=nx>the</span> <span class=nx>same</span> <span class=nx>time</span><span class=p>.&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>MyComponent</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>JSX removes whitespace at the beginning and ending of a line. It also removes blank lines. New lines adjacent to tags are removed; new lines that occur in the middle of string literals are condensed into a single space.</p></li><li><p><strong>JSX</strong></p><p>You can provide more JSX elements as the children. This is useful for displaying nested components.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>MyContainer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>MyFirstComponent</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>MySecondComponent</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>MyContainer</span><span class=p>&gt;</span>
</span></span></code></pre></div></li><li><p><strong>JS Expression</strong></p><p>You can pass any JavaScript expression as children, by enclosing it within <code>{}</code>.</p></li></ul></li></ul><h2 id=components>Components</h2><p>Components let you split the UI into independent, reusable pieces, and think about each piece in isolation.</p><p>Conceptually, components are like JavaScript functions. They accept arbitrary inputs (called “props”) and return React elements describing what should appear on the screen.</p><blockquote><p><strong>Note:</strong> <strong>Always start component names with a capital letter.</strong></p></blockquote><ul><li><p>Function Component</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Welcome</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/h1&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>element</span> <span class=o>=</span> <span class=o>&lt;</span><span class=nx>Welcome</span> <span class=nx>name</span><span class=o>=</span><span class=s2>&#34;Sara&#34;</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>element</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;root&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div></li><li><p>Class Component</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Welcome</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>element</span> <span class=o>=</span> <span class=p>&lt;</span><span class=nt>Welcome</span><span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>element</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;root&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//with state
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>Clock</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>date</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>()};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=nx>world</span><span class=o>!</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h2</span><span class=p>&gt;</span><span class=nx>It</span> <span class=nx>is</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>date</span><span class=p>.</span><span class=nx>toLocaleTimeString</span><span class=p>()}.&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>Clock</span> <span class=p>/&gt;,</span>
</span></span><span class=line><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;root&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//with method
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>Toggle</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>isToggleOn</span><span class=o>:</span> <span class=kc>true</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// This binding is necessary to make `this` work in the callback
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>handleClick</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleClick</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleClick</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>(</span><span class=nx>prevState</span> <span class=p>=&gt;</span> <span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>isToggleOn</span><span class=o>:</span> <span class=o>!</span><span class=nx>prevState</span><span class=p>.</span><span class=nx>isToggleOn</span>
</span></span><span class=line><span class=cl>    <span class=p>}));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>button</span> <span class=na>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleClick</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>isToggleOn</span> <span class=o>?</span> <span class=s1>&#39;ON&#39;</span> <span class=o>:</span> <span class=s1>&#39;OFF&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>Toggle</span> <span class=p>/&gt;,</span>
</span></span><span class=line><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;root&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div></li></ul><h2 id=lifecycle-methods>Lifecycle Methods</h2><p><img src=C:%5cUsers%5cdyhes%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20220329184734485.png loading=lazy alt=image-20220329184734485></p><p>include less used method</p><p><img src=C:%5cUsers%5cdyhes%5cAppData%5cRoaming%5cTypora%5ctypora-user-images%5cimage-20220330145339086.png loading=lazy alt=image-20220330145339086></p><p>[more detail&mldr;](<a class=link href=https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/ target=_blank rel=noopener>React lifecycle methods diagram (wojtekmaj.pl)</a>)</p><h2 id=hooks>Hooks</h2><p><em>Hooks</em> are a new addition in <strong>React 16.8</strong>. They let you use state and other React features without writing a class.</p><h3 id=usestate><code>useState</code></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl> <span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>initialState</span><span class=p>);</span>
</span></span></code></pre></div><p>Returns a stateful value, and a function to update it.</p><p>During the initial render, the returned state (state) is the same as the value passed as the first argument (initialState).</p><p>The setState function is used to update the state. It accepts a new state value and enqueues a re-render of the component.</p><p>If the new state is computed using the previous state, you can pass a function to <code>setState</code>. The function will receive the previous value, and return an updated value.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>button</span> <span class=na>onClick</span><span class=o>=</span><span class=p>{()</span> <span class=p>=&gt;</span> <span class=nx>setCount</span><span class=p>(</span><span class=nx>prevCount</span> <span class=p>=&gt;</span> <span class=nx>prevCount</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)}&gt;</span><span class=o>-</span><span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span></code></pre></div><blockquote><p>Unlike the <code>setState</code> method found in class components, <code>useState</code> does not automatically merge update objects. You can replicate this behavior by combining the function updater form with object spread syntax:</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>({});</span>
</span></span><span class=line><span class=cl><span class=nx>setState</span><span class=p>(</span><span class=nx>prevState</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Object.assign would also work
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=p>{...</span><span class=nx>prevState</span><span class=p>,</span> <span class=p>...</span><span class=nx>updatedValues</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><blockquote><p>Another option is <code>useReducer</code>, which is more suited for managing state objects that contain multiple sub-values.</p></blockquote><p>The <code>initialState</code> argument is the state used during the initial render. In subsequent renders, it is disregarded. If the initial state is the result of an expensive computation, you may provide a function instead, which will be executed only on the initial render:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>[</span><span class=nx>state</span><span class=p>,</span> <span class=nx>setState</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>initialState</span> <span class=o>=</span> <span class=nx>someExpensiveComputation</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>initialState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>If you update a State Hook to the same value as the current state, React will bail out without rendering the children or firing effects.</p><p>Note that React may still need to render that specific component again before bailing out. That shouldn’t be a concern because React won’t unnecessarily go “deeper” into the tree. If you’re doing expensive calculations while rendering, you can optimize them with <code>useMemo</code>.</p><h3 id=useeffect><code>useEffect</code></h3><pre tabindex=0><code>useEffect(didUpdate);
</code></pre><p>Accepts a <strong>function</strong> that contains <strong>imperative, possibly effectful code</strong>.</p><p>Mutations, subscriptions, timers, logging, and other side effects are <strong>not allowed inside the main body</strong> of a function component (referred to as React’s <em><strong>render phase</strong></em>). Doing so will lead to confusing bugs and inconsistencies in the UI.</p><p>Instead, use <code>useEffect</code>. The function passed to <code>useEffect</code> will <strong>run after the render is committed to the screen</strong>. Think of effects as an escape hatch from React’s purely functional world into the imperative world.</p><p>By default, effects <strong>run after every completed render</strong>, but you can choose to fire them <a class=link href=https://reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect target=_blank rel=noopener>only when certain values have changed</a>.</p><h4 id=cleaning-up-an-effect>Cleaning up an effect</h4><p>Often, effects create resources that need to be cleaned up <strong>before</strong> the component leaves the screen, such as a subscription or timer ID. To do this, the function passed to <code>useEffect</code> may <strong>return a clean-up function</strong>. For example, to create a subscription:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>subscription</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>source</span><span class=p>.</span><span class=nx>subscribe</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Clean up the subscription
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>subscription</span><span class=p>.</span><span class=nx>unsubscribe</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></div><p>The clean-up function <strong>runs before the component is removed from the UI</strong> to prevent memory leaks. Additionally, if a component renders multiple times (as they typically do), the <strong>previous effect is cleaned up before executing the next effect</strong>. In our example, this means <strong>a new subscription is created on every update</strong>. To avoid firing an effect on every update, refer to the next section.</p><h4 id=timing-of-effects>Timing of effects</h4><p>Unlike <code>componentDidMount</code> and <code>componentDidUpdate</code>, the function passed to <code>useEffect</code> fires <strong>after</strong> layout and paint, during a <strong>deferred event</strong>. This makes it suitable for the many common side effects, like setting up subscriptions and event handlers, because most types of work shouldn’t block the browser from updating the screen.</p><p>However, not all effects can be deferred. For example, a DOM mutation that is visible to the user must fire synchronously before the next paint so that the user does not perceive a visual inconsistency. (The distinction is conceptually similar to passive versus active event listeners.) For these types of effects, React provides one additional Hook called <a class=link href=https://reactjs.org/docs/hooks-reference.html#uselayouteffect target=_blank rel=noopener><code>useLayoutEffect</code></a>. It has the same signature as <code>useEffect</code>, and <strong>only differs in when it is fired</strong>.</p><p>Additionally, starting in <strong>React 18</strong>, the function passed to <code>useEffect</code> will fire synchronously <strong>before</strong> layout and paint <strong>when it’s the result of a discrete user input</strong> such as a click, or when it’s the result of an update wrapped in <a class=link href=https://reactjs.org/docs/react-dom.html#flushsync target=_blank rel=noopener><code>flushSync</code></a>. This behavior allows the result of the effect to be observed by the event system, or by the caller of <a class=link href=https://reactjs.org/docs/react-dom.html#flushsync target=_blank rel=noopener><code>flushSync</code></a>.</p><blockquote><p><strong>Note</strong> : This only affects the timing of when the function passed to <code>useEffect</code> is called - updates scheduled inside these effects are still deferred. This is different than <a class=link href=https://reactjs.org/docs/hooks-reference.html#uselayouteffect target=_blank rel=noopener><code>useLayoutEffect</code></a>, which fires the function and processes the updates inside of it immediately.</p></blockquote><p>Even in cases where <code>useEffect</code> is deferred until after the browser has painted, it’s guaranteed to fire <strong>before any new renders</strong>. React will always flush a previous render’s effects before starting a new update.</p><h4 id=conditionally-firing-an-effect>Conditionally firing an effect</h4><p>The default behavior for effects is to fire the effect after every completed render. That way an effect is always recreated if one of its dependencies changes.</p><p>However, this may be overkill in some cases, like the subscription example from the previous section. We don’t need to create a new subscription on every update, only if the <code>source</code> prop has changed.</p><p>To implement this, <strong>pass a second argument to <code>useEffect</code> that is the array of values that the effect depends on</strong>. Our updated example now looks like this:</p><pre tabindex=0><code>useEffect(
  () =&gt; {
    const subscription = props.source.subscribe();
    return () =&gt; {
      subscription.unsubscribe();
    };
  },
  [props.source],
);
</code></pre><p>Now the subscription will only be recreated when <code>props.source</code> changes.</p><blockquote><p>Note</p><p>If you use this optimization, make sure the array includes <strong>all values from the component scope (such as props and state) that change over time and that are used by the effect</strong>. Otherwise, your code will reference stale values from previous renders. Learn more about <a class=link href=https://reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies target=_blank rel=noopener>how to deal with functions</a> and what to do when the <a class=link href=https://reactjs.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often target=_blank rel=noopener>array values change too often</a>.</p><p>If you want to run an effect and clean it up <strong>only once (on mount and unmount)</strong>, you can pass an empty array (<code>[]</code>) as a second argument. This tells React that your effect doesn’t depend on <em>any</em> values from props or state, so it never needs to re-run. This isn’t handled as a special case — it follows directly from how the dependencies array always works.</p><p>If you pass an empty array (<code>[]</code>), the props and state inside the effect <strong>will always have their initial values</strong>. While passing <code>[]</code> as the second argument is closer to the familiar <code>componentDidMount</code> and <code>componentWillUnmount</code> mental model, there are usually <a class=link href=https://reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies target=_blank rel=noopener>better</a> <a class=link href=https://reactjs.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often target=_blank rel=noopener>solutions</a> to avoid re-running effects too often. Also, don’t forget that React defers running <code>useEffect</code> until after the browser has painted, so doing extra work is less of a problem.</p><p>We recommend using the <a class=link href=https://github.com/facebook/react/issues/14920 target=_blank rel=noopener><code>exhaustive-deps</code></a> rule as part of our <a class=link href=https://www.npmjs.com/package/eslint-plugin-react-hooks#installation target=_blank rel=noopener><code>eslint-plugin-react-hooks</code></a> package. It warns when dependencies are specified incorrectly and suggests a fix.</p></blockquote><p>The array of dependencies is not passed as arguments to the effect function. Conceptually, though, that’s what they represent: <strong>every value referenced inside the effect function should also appear in the dependencies array</strong>. In the future, a sufficiently advanced compiler could create this array automatically.</p><h3 id=usecontext><code>useContext</code></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>value</span> <span class=o>=</span> <span class=nx>useContext</span><span class=p>(</span><span class=nx>MyContext</span><span class=p>);</span>
</span></span></code></pre></div><p>Accepts a context object (the value returned from <code>React.createContext</code>) and returns the current context value for that context. The current context value is determined by the <code>value</code> prop of the nearest <code>&lt;MyContext.Provider></code> above the calling component in the tree.</p><p>Don’t forget that the argument to <code>useContext</code> must be the <em>context object itself</em>:</p><ul><li><strong>Correct:</strong> <code>useContext(MyContext)</code></li><li><strong>Incorrect:</strong> <code>useContext(MyContext.Consumer)</code></li><li><strong>Incorrect:</strong> <code>useContext(MyContext.Provider)</code></li></ul><h3 id=rules-of-hooks>Rules of Hooks</h3><p>Hooks are JavaScript functions, but you need to follow two rules when using them.</p><ul><li><p>Only Call Hooks <strong>at the Top Leve</strong>l</p><p><strong>Don’t call Hooks inside loops, conditions, or nested functions.</strong> Instead, always use Hooks at the top level of your React function, <strong>before any early returns</strong>. By following this rule, you ensure that Hooks are called in the same order each time a component renders. That’s what allows React to correctly preserve the state of Hooks between multiple <code>useState</code> and <code>useEffect</code> calls.</p></li><li><p>Only Call Hooks <strong>from React Functions</strong></p><p><strong>Don’t call Hooks from regular JavaScript functions.</strong> Instead, you can:</p><ul><li>✅ Call Hooks from React function components.</li><li>✅ Call Hooks from custom Hooks</li></ul><p>By following this rule, you ensure that all stateful logic in a component is clearly visible from its source code.</p></li></ul><h3 id=custom-hooks>Custom Hooks</h3><p>Building your own Hooks lets you extract component logic into reusable functions.</p><p>Traditionally in React, we’ve had two popular ways to share stateful logic between components: <a class=link href=https://reactjs.org/docs/render-props.html target=_blank rel=noopener>render props</a> and <a class=link href=https://reactjs.org/docs/higher-order-components.html target=_blank rel=noopener>higher-order components</a>. We will now look at how Hooks solve many of the same problems without forcing you to add more components to the tree.</p><p><strong>A custom Hook is a JavaScript function whose name starts with ”<code>use</code>” and that may call other Hooks.</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useState</span><span class=p>,</span> <span class=nx>useEffect</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>useFriendStatus</span><span class=p>(</span><span class=nx>friendID</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>isOnline</span><span class=p>,</span> <span class=nx>setIsOnline</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nx>handleStatusChange</span><span class=p>(</span><span class=nx>status</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>setIsOnline</span><span class=p>(</span><span class=nx>status</span><span class=p>.</span><span class=nx>isOnline</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>ChatAPI</span><span class=p>.</span><span class=nx>subscribeToFriendStatus</span><span class=p>(</span><span class=nx>friendID</span><span class=p>,</span> <span class=nx>handleStatusChange</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>ChatAPI</span><span class=p>.</span><span class=nx>unsubscribeFromFriendStatus</span><span class=p>(</span><span class=nx>friendID</span><span class=p>,</span> <span class=nx>handleStatusChange</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>isOnline</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>FriendStatus</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>isOnline</span> <span class=o>=</span> <span class=nx>useFriendStatus</span><span class=p>(</span><span class=nx>props</span><span class=p>.</span><span class=nx>friend</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>isOnline</span> <span class=o>===</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;Loading...&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>isOnline</span> <span class=o>?</span> <span class=s1>&#39;Online&#39;</span> <span class=o>:</span> <span class=s1>&#39;Offline&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>FriendListItem</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>isOnline</span> <span class=o>=</span> <span class=nx>useFriendStatus</span><span class=p>(</span><span class=nx>props</span><span class=p>.</span><span class=nx>friend</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>li</span> <span class=na>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>color</span><span class=o>:</span> <span class=nx>isOnline</span> <span class=o>?</span> <span class=s1>&#39;green&#39;</span> <span class=o>:</span> <span class=s1>&#39;black&#39;</span> <span class=p>}}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>friend</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Unlike a React component, a custom Hook doesn’t need to have a specific signature. We can decide what it takes as arguments, and what, if anything, it should return. In other words, it’s just like a normal function.</p><h2 id=lists>Lists</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kd>function</span> <span class=nx>NumberList</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>numbers</span> <span class=o>=</span> <span class=nx>props</span><span class=p>.</span><span class=nx>numbers</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>listItems</span> <span class=o>=</span> <span class=nx>numbers</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>number</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>li</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>number</span><span class=p>.</span><span class=nx>toString</span><span class=p>()}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>number</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;{</span><span class=nx>listItems</span><span class=p>}&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>NumberList</span> <span class=na>numbers</span><span class=o>=</span><span class=p>{</span><span class=nx>numbers</span><span class=p>}</span> <span class=p>/&gt;,</span>
</span></span><span class=line><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;root&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//using index
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>todoItems</span> <span class=o>=</span> <span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>todo</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Only do this if items have no stable IDs
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>&lt;</span><span class=nt>li</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>//We don’t recommend using indexes for keys if the order of items may change. This can negatively impact performance and may cause issues with component state.
</span></span></span></code></pre></div><p>Keys help React identify which items have changed, are added, or are removed.</p><h2 id=forms>Forms</h2><h3 id=controlled-components>Controlled Components</h3><p>In HTML, form elements such as <code>&lt;input></code>, <code>&lt;textarea></code>, and <code>&lt;select></code> typically maintain their own state and update it based on user input. In React, mutable state is typically kept in the state property of components, and only updated with <a class=link href=https://reactjs.org/docs/react-component.html#setstate target=_blank rel=noopener><code>setState()</code></a>.</p><p>We can combine the two by making the React state be the “single source of truth”. Then <strong>the React component that renders a form also controls what happens in that form on subsequent user input.</strong> An input form element whose value is controlled by React in this way is called a “controlled component”.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>NameForm</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span><span class=nx>value</span><span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>handleChange</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleChange</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>handleSubmit</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleSubmit</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleChange</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span><span class=nx>value</span><span class=o>:</span> <span class=nx>event</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleSubmit</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;A name was submitted: &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>event</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>form</span> <span class=na>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleSubmit</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=nx>Name</span><span class=o>:</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>value</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>value</span><span class=p>}</span> <span class=na>onChange</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleChange</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;Submit&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Since the <code>value</code> attribute is set on our form element, the displayed value will always be <code>this.state.value</code>, making the React state the source of truth. Since <code>handleChange</code> runs on every keystroke to update the React state, the displayed value will update as the user types.</p><p>It can sometimes be tedious to use controlled components, because you need to write an event handler for every way your data can change and pipe all of the input state through a React component. This can become particularly annoying when you are converting a preexisting codebase to React, or integrating a React application with a non-React library. In these situations, we can use <a class=link href=https://reactjs.org/docs/uncontrolled-components.html target=_blank rel=noopener>uncontrolled components</a>, an alternative technique for implementing input forms.</p><h3 id=uncontrolled-components>Uncontrolled Components</h3><p>In most cases, we recommend using <a class=link href=https://reactjs.org/docs/forms.html#controlled-components target=_blank rel=noopener>controlled components</a> to implement forms. In a controlled component, form data is handled by a React component. The alternative is uncontrolled components, where form data is handled by the DOM itself.</p><p>To write an uncontrolled component, instead of writing an event handler for every state update, you can <a class=link href=https://reactjs.org/docs/refs-and-the-dom.html target=_blank rel=noopener>use a ref</a> to get form values from the DOM.</p><p>In the React rendering lifecycle, the <code>value</code> attribute on form elements will override the value in the DOM. With an uncontrolled component, you often want React to specify the initial value, but leave subsequent updates uncontrolled. To handle this case, you can specify a <code>defaultValue</code> attribute instead of <code>value</code>. Changing the value of <code>defaultValue</code> attribute after a component has mounted will not cause any update of the value in the DOM.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>NameForm</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>handleSubmit</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleSubmit</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>input</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleSubmit</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>alert</span><span class=p>(</span><span class=s1>&#39;A name was submitted: &#39;</span> <span class=o>+</span> <span class=k>this</span><span class=p>.</span><span class=nx>input</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>event</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>form</span> <span class=na>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleSubmit</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nx>Name</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>input</span>
</span></span><span class=line><span class=cl>              <span class=na>defaultValue</span><span class=o>=</span><span class=s>&#34;Bob&#34;</span>
</span></span><span class=line><span class=cl>              <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>              <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>input</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;/</span><span class=nt>label</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;Submit&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=lifting-state-up>Lifting state up</h2><p>In React, sharing state is accomplished by moving it up to the closest common ancestor of the components that need it. This is called “lifting state up”.</p><h2 id=context>Context</h2><p>Context provides a way to pass data through the component tree without having to pass props down manually at every level.</p><p>Context is designed to share data that can be considered “global” for a tree of React components, such as the current authenticated user, theme, or preferred language.</p><p>Context is primarily used when some data needs to be accessible by <em>many</em> components at different nesting levels. Apply it sparingly because it makes component reuse more difficult. <strong>If you only want to avoid passing some props through many levels, <a class=link href=https://reactjs.org/docs/composition-vs-inheritance.html target=_blank rel=noopener>component composition</a> is often a simpler solution than context.</strong></p><p>Using context, we can avoid passing props through intermediate elements:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=c1>// Context lets us pass a value deep into the component tree without explicitly threading it through every component.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Create a context for the current theme (with &#34;light&#34; as the default).
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>ThemeContext</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createContext</span><span class=p>(</span><span class=s1>&#39;light&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>App</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Use a Provider to pass the current theme to the tree below.    
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// Any component can read it, no matter how deep it is.    
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// In this example, we&#39;re passing &#34;dark&#34; as the current value.    
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ThemeContext.Provider</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;dark&#34;</span><span class=p>&gt;</span>        
</span></span><span class=line><span class=cl>              <span class=p>&lt;</span><span class=nt>Toolbar</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>ThemeContext.Provider</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// A component in the middle doesn&#39;t have to
</span></span></span><span class=line><span class=cl><span class=c1>// pass the theme down explicitly anymore.function Toolbar() {
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ThemedButton</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ThemedButton</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Assign a contextType to read the current theme context.  
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// React will find the closest theme Provider above and use its value.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// In this example, the current theme is &#34;dark&#34;.  
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>static</span> <span class=nx>contextType</span> <span class=o>=</span> <span class=nx>ThemeContext</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>&lt;</span><span class=nt>Button</span> <span class=na>theme</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>context</span><span class=p>}</span> <span class=p>/&gt;;</span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=api>API</h3><h4 id=reactcreatecontext><code>React.createContext</code></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MyContext</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createContext</span><span class=p>(</span><span class=nx>defaultValue</span><span class=p>);</span>
</span></span></code></pre></div><p>Creates a Context object. When React renders a component that subscribes to this Context object it will read the current context value from the closest matching <code>Provider</code> above it in the tree.</p><p>The <code>defaultValue</code> argument is <strong>only</strong> used when <strong>a component does not have a matching Provider above it in the tree</strong>. This default value can be helpful for testing components in isolation without wrapping them. Note: passing <code>undefined</code> as a Provider value does not cause consuming components to use <code>defaultValue</code>.</p><h4 id=contextprovider><code>Context.Provider</code></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>MyContext</span><span class=p>.</span><span class=nx>Provider</span> <span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=cm>/* some value */</span><span class=p>}</span><span class=o>&gt;</span>
</span></span></code></pre></div><p>Every Context object comes with a Provider React component that allows consuming components to subscribe to context changes.</p><p>The Provider component accepts a <code>value</code> prop to be passed to consuming components that are descendants of this Provider. One Provider can be connected to many consumers. Providers can be nested to <strong>override values</strong> deeper within the tree.</p><p>All consumers that are descendants of a Provider will re-render whenever the Provider’s <code>value</code> prop changes. The propagation from Provider to its descendant consumers (including <a class=link href=https://reactjs.org/docs/context.html#classcontexttype target=_blank rel=noopener><code>.contextType</code></a> and <a class=link href=https://reactjs.org/docs/hooks-reference.html#usecontext target=_blank rel=noopener><code>useContext</code></a>) is not subject to the <code>shouldComponentUpdate</code> method, so the consumer is updated even when an ancestor component skips an update.</p><h4 id=classcontexttype><code>Class.contextType</code></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MyContext</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createContext</span><span class=p>(</span><span class=nx>defaultValue</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>MyClass</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>static</span> <span class=nx>contextType</span> <span class=o>=</span> <span class=nx>MyContext</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>value</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>context</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* render something based on the value */</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>contextType</code> property on a class can be assigned a Context object created by <a class=link href=https://reactjs.org/docs/context.html#reactcreatecontext target=_blank rel=noopener><code>React.createContext()</code></a>. Using this property lets you <strong>consume the nearest current value of that Context type using <code>this.context</code></strong>. You can reference this in any of the lifecycle methods including the render function.</p><blockquote><p>You can only subscribe to a single context using this API. If you need to read more than one see <a class=link href=https://reactjs.org/docs/context.html#consuming-multiple-contexts target=_blank rel=noopener>Consuming Multiple Contexts</a>.</p></blockquote><h4 id=contextconsumer><code>Context.Consumer</code></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>MyContext.Consumer</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>value</span> <span class=p>=&gt;</span> <span class=cm>/* render something based on the context value */</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>MyContext.Consumer</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>A React component that subscribes to context changes. Using this component lets you subscribe to a context within a <strong>function component</strong>.</p><p><strong>Requires a function as a child</strong>. The function receives the current context value and returns a React node. The value argument passed to the function will be equal to the value prop of the closest Provider for this context above in the tree. If there is no Provider for this context above, the value argument will be equal to the defaultValue that was passed to createContext().</p><h4 id=contextdisplayname><code>Context.displayName</code></h4><p>Context object accepts a displayName string property. React DevTools uses this string to determine what to display for the context.</p><p>For example, the following component will appear as MyDisplayName in the DevTools:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MyContext</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createContext</span><span class=p>(</span><span class=cm>/* some value */</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>MyContext</span><span class=p>.</span><span class=nx>displayName</span> <span class=o>=</span> <span class=s1>&#39;MyDisplayName&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>MyContext</span><span class=p>.</span><span class=nx>Provider</span><span class=o>&gt;</span> <span class=c1>// &#34;MyDisplayName.Provider&#34; in DevTools
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&lt;</span><span class=nx>MyContext</span><span class=p>.</span><span class=nx>Consumer</span><span class=o>&gt;</span> <span class=c1>// &#34;MyDisplayName.Consumer&#34; in DevTools
</span></span></span></code></pre></div><h2 id=error-boundaries>Error Boundaries</h2><p>A JavaScript error in a part of the UI shouldn’t break the whole app. To solve this problem for React users, React 16 introduces a new concept of an “error boundary”.</p><p>Error boundaries are React components that <strong>catch JavaScript errors anywhere in their child component tree, log those errors, and display a fallback UI</strong> instead of the component tree that crashed. Error boundaries catch errors <strong>during rendering, in lifecycle methods, and in constructors of the whole tree below them</strong>.</p><blockquote><p>Error boundaries do <strong>not</strong> catch errors for:</p><ul><li>Event handlers</li></ul><p>React doesn’t need error boundaries to recover from errors in event handlers. Unlike the render method and lifecycle methods, the event handlers don’t happen during rendering. So if they throw, React still knows what to display on the screen. If you need to catch an error inside an event handler, use the regular JavaScript <code>try</code> / <code>catch</code> statement</p><ul><li><p>Asynchronous code (e.g. <code>setTimeout</code> or <code>requestAnimationFrame</code> callbacks)</p></li><li><p>Server side rendering</p></li><li><p>Errors thrown in the error boundary itself (rather than its children)</p></li></ul></blockquote><p>A class component becomes an error boundary if it defines either (or both) of the lifecycle methods static <code>getDerivedStateFromError()</code> or <code>componentDidCatch()</code>. Use static <code>getDerivedStateFromError() </code>to render a fallback UI after an error has been thrown. Use <code>componentDidCatch() </code>to log error information.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ErrorBoundary</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>hasError</span><span class=o>:</span> <span class=kc>false</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>static</span> <span class=nx>getDerivedStateFromError</span><span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Update state so the next render will show the fallback UI.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>{</span> <span class=nx>hasError</span><span class=o>:</span> <span class=kc>true</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>componentDidCatch</span><span class=p>(</span><span class=nx>error</span><span class=p>,</span> <span class=nx>errorInfo</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// You can also log the error to an error reporting service
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>logErrorToMyService</span><span class=p>(</span><span class=nx>error</span><span class=p>,</span> <span class=nx>errorInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>hasError</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// You can render any custom fallback UI
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Something</span> <span class=nx>went</span> <span class=nx>wrong</span><span class=p>.&lt;/</span><span class=nt>h1</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>ErrorBoundary</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>MyWidget</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>ErrorBoundary</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Error boundaries work like a JavaScript <code>catch {}</code> block, but for components. <strong>Only class components</strong> can be error boundaries. In practice, most of the time you’ll want to declare an error boundary component once and use it throughout your application.</p><p>Note that <strong>error boundaries only catch errors in the components below them in the tree</strong>. An error boundary can’t catch an error within itself. If an error boundary fails trying to render the error message, the error will propagate to the closest error boundary above it.</p><p><strong>As of React 16, errors that were not caught by any error boundary will result in unmounting of the whole React component tree.</strong></p><h2 id=ref>Ref</h2><p>Refs provide a way to <strong>access DOM nodes or React elements</strong> created in the render method.</p><p>In the typical React dataflow, <strong>props</strong> are the only way that parent components interact with their children. To modify a child, you re-render it with new props. However, there are a few cases where you need to imperatively <strong>modify a child outside of the typical dataflow</strong>.</p><p>There are a few good use cases for refs:</p><ul><li>Managing focus, text selection, or media playback.</li><li>Triggering imperative animations.</li><li>Integrating with third-party DOM libraries.</li></ul><blockquote><p>Avoid using refs for anything that can be done declaratively！</p></blockquote><h3 id=create>Create</h3><p>Refs are created using <code>React.createRef()</code> and attached to React elements via the <code>ref</code> attribute. Refs are commonly assigned to an instance property when a component is constructed so they can be referenced throughout the component.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>class</span> <span class=nx>MyComponent</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>myRef</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>div</span> <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>myRef</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></div><p>By default, <strong>you may not use the <code>ref</code> attribute on function components</strong> because they don’t have instances:</p><p>If you want to allow people to take a <code>ref</code> to your function component, you can</p><ul><li>use <a class=link href=https://reactjs.org/docs/forwarding-refs.html target=_blank rel=noopener><code>forwardRef</code></a> (possibly in conjunction with <a class=link href=https://reactjs.org/docs/hooks-reference.html#useimperativehandle target=_blank rel=noopener><code>useImperativeHandle</code></a>),</li><li>or convert the component to a class.</li></ul><p>You can, however, <strong>use the <code>ref</code> attribute inside a function component</strong> as long as you refer to a DOM element or a class component</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kd>function</span> <span class=nx>CustomTextInput</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// textInput must be declared here so the ref can refer to it
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>textInput</span> <span class=o>=</span> <span class=nx>useRef</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=kd>function</span> <span class=nx>handleClick</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>textInput</span><span class=p>.</span><span class=nx>current</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>input</span>
</span></span><span class=line><span class=cl>        <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>textInput</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>input</span>
</span></span><span class=line><span class=cl>        <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>value</span><span class=o>=</span><span class=s>&#34;Focus the text input&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleClick</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=access>Access</h3><p>The value of the ref differs depending on the type of the node:</p><ul><li>When the <code>ref</code> attribute is used on an HTML element, the <code>ref</code> created in the constructor with <code>React.createRef()</code> receives the underlying DOM element as its <code>current</code> property.</li><li>When the <code>ref</code> attribute is used on a custom class component, the <code>ref</code> object receives the mounted instance of the component as its <code>current</code>.</li><li><strong>You may not use the <code>ref</code> attribute on function components</strong> because they don’t have instances.</li></ul><h3 id=ref-forwarding>Ref forwarding</h3><p>Ref forwarding is a technique for automatically passing a <a class=link href=https://reactjs.org/docs/refs-and-the-dom.html target=_blank rel=noopener>ref</a> through a component to one of its children. <strong>Ref forwarding lets components opt into exposing any child component’s ref as their own</strong>.</p><p><strong>Ref forwarding is an opt-in feature that lets some components take a <code>ref</code> they receive, and pass it further down (in other words, “forward” it) to a child.</strong></p><p>In the example below, <code>FancyButton</code> uses <code>React.forwardRef</code> to obtain the <code>ref</code> passed to it, and then forward it to the DOM <code>button</code> that it renders:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=nx>FancyButton</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>forwardRef</span><span class=p>((</span><span class=nx>props</span><span class=p>,</span> <span class=nx>ref</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>(</span>  <span class=p>&lt;</span><span class=nt>button</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>ref</span><span class=p>}</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;FancyButton&#34;</span><span class=p>&gt;</span>    <span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// You can now get a ref directly to the DOM button:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>ref</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>createRef</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>FancyButton</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>ref</span><span class=p>}&gt;</span><span class=nx>Click</span> <span class=nx>me</span><span class=o>!</span><span class=p>&lt;/</span><span class=nt>FancyButton</span><span class=p>&gt;;</span>
</span></span></code></pre></div><p>This way, components using <code>FancyButton</code> can get a ref to the underlying <code>button</code> DOM node and access it if necessary—just like if they used a DOM <code>button</code> directly.</p><blockquote><p>Note: The second <code>ref</code> argument only exists when you define a component with <code>React.forwardRef</code> call. Regular function or class components don’t receive the <code>ref</code> argument, and ref is not available in props either.</p></blockquote><p>Ref forwarding is not limited to DOM components. You can forward refs to class component instances, too.</p><h3 id=callback-refs>Callback Refs</h3><p>React also supports another way to set refs called “callback refs”, which gives more fine-grain control over when refs are set and unset.</p><p>Instead of passing a <code>ref</code> attribute created by <code>createRef()</code>, you pass a function. The function receives the React component instance or HTML DOM element as its argument, which can be stored and accessed elsewhere.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>CustomTextInput</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>textInput</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setTextInputRef</span> <span class=o>=</span> <span class=nx>element</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>textInput</span> <span class=o>=</span> <span class=nx>element</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>focusTextInput</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Focus the text input using the raw DOM API
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>textInput</span><span class=p>)</span> <span class=k>this</span><span class=p>.</span><span class=nx>textInput</span><span class=p>.</span><span class=nx>focus</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>componentDidMount</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// autofocus the input on mount
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>focusTextInput</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Use the `ref` callback to store a reference to the text input DOM
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// element in an instance field (for example, this.textInput).
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>input</span>
</span></span><span class=line><span class=cl>          <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>setTextInputRef</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>input</span>
</span></span><span class=line><span class=cl>          <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>value</span><span class=o>=</span><span class=s>&#34;Focus the text input&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>focusTextInput</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>React will call the <code>ref</code> callback with the DOM element when the component mounts, and call it with <code>null</code> when it unmounts. Refs are guaranteed to be up-to-date before <code>componentDidMount</code> or <code>componentDidUpdate</code> fires.</p><blockquote><p><strong>NOTE</strong>: If the <code>ref</code> callback is defined as an inline function, it will <strong>get called twice during updates</strong>, first with <code>null</code> and then again with the DOM element. This is because a new instance of the function is created with each render, so React needs to clear the old ref and set up the new one. You can avoid this by defining the <code>ref</code> callback as a bound method on the class, but note that it shouldn’t matter in most cases.</p></blockquote><p>You can pass callback refs between components like you can with object refs that were created with <code>React.createRef()</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kd>function</span> <span class=nx>CustomTextInput</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>input</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>inputRef</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Parent</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>CustomTextInput</span>
</span></span><span class=line><span class=cl>        <span class=na>inputRef</span><span class=o>=</span><span class=p>{</span><span class=nx>el</span> <span class=p>=&gt;</span> <span class=k>this</span><span class=p>.</span><span class=nx>inputElement</span> <span class=o>=</span> <span class=nx>el</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>In the example above, <code>Parent</code> passes its ref callback as an <code>inputRef</code> prop to the <code>CustomTextInput</code>, and the <code>CustomTextInput</code> passes the same function as a special <code>ref</code> attribute to the <code>&lt;input></code>. As a result, <code>this.inputElement</code> in <code>Parent</code> will be set to the DOM node corresponding to the <code>&lt;input></code> element in the <code>CustomTextInput</code>.</p><h3 id=legacy-api-string-refs>Legacy API: String Refs</h3><p>If you worked with React before, you might be familiar with an older API where the <code>ref</code> attribute is a <strong>string</strong>, like <code>"textInput"</code>, and the DOM node is accessed as <code>this.refs.textInput</code>. We advise against it because string refs have <a class=link href=https://github.com/facebook/react/pull/8333#issuecomment-271648615 target=_blank rel=noopener>some issues</a>, are considered legacy, and <strong>are likely to be removed in one of the future releases</strong>.</p><h2 id=fragment>Fragment</h2><p>Fragment is a common pattern in React is for a component to return multiple elements. Fragments let you group a list of children without adding extra nodes to the DOM.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>React.Fragment</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ChildA</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ChildB</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>ChildC</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>React.Fragment</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>short syntax</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Columns</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>td</span><span class=p>&gt;</span><span class=nx>World</span><span class=p>&lt;/</span><span class=nt>td</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>You can use <code>&lt;>&lt;/></code> the same way you’d use any other element except that it doesn’t support keys or attributes.</p><h3 id=keyed-fragments>Keyed Fragments</h3><p>Fragments declared with the explicit <code>&lt;React.Fragment></code> syntax may have keys. A use case for this is mapping a collection to an array of fragments — for example, to create a description list:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Glossary</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>dl</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>items</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>item</span> <span class=p>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Without the `key`, React will fire a key warning
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>&lt;</span><span class=nt>React.Fragment</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>item</span><span class=p>.</span><span class=nx>id</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;{</span><span class=nx>item</span><span class=p>.</span><span class=nx>term</span><span class=p>}&lt;/</span><span class=nt>dt</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>dd</span><span class=p>&gt;{</span><span class=nx>item</span><span class=p>.</span><span class=nx>description</span><span class=p>}&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>React.Fragment</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>))}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>dl</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><code>key</code> is the only attribute that can be passed to <code>Fragment</code>.</p><h2 id=high-order-components>High-Order Components</h2><p>A higher-order component (HOC) is an advanced technique in React for reusing component logic. HOCs are not part of the React API, per se. They are a pattern that emerges from React’s compositional nature.</p><p>Concretely, <strong>a higher-order component is a function that takes a component and returns a new component.</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>EnhancedComponent</span> <span class=o>=</span> <span class=nx>higherOrderComponent</span><span class=p>(</span><span class=nx>WrappedComponent</span><span class=p>);</span>
</span></span></code></pre></div><p>HOCs are common in third-party React libraries, such as Redux’s <a class=link href=https://github.com/reduxjs/react-redux/blob/master/docs/api/connect.md#connect target=_blank rel=noopener><code>connect</code></a> and Relay’s <a class=link href=https://relay.dev/docs/v10.1.3/fragment-container/#createfragmentcontainer target=_blank rel=noopener><code>createFragmentContainer</code></a>.</p><p>For example we can imagine that in a large app, the same pattern of subscribing to <code>DataSource</code> and calling <code>setState</code> will occur over and over again. We want an abstraction that allows us to define this logic in a single place and share it across many components. This is where higher-order components excel.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=c1>// This function takes a component...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>function</span> <span class=nx>withSubscription</span><span class=p>(</span><span class=nx>WrappedComponent</span><span class=p>,</span> <span class=nx>selectData</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...and returns another component...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=kr>class</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>handleChange</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleChange</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>data</span><span class=o>:</span> <span class=nx>selectData</span><span class=p>(</span><span class=nx>DataSource</span><span class=p>,</span> <span class=nx>props</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>componentDidMount</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// ... that takes care of the subscription...
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>DataSource</span><span class=p>.</span><span class=nx>addChangeListener</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>handleChange</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>componentWillUnmount</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>DataSource</span><span class=p>.</span><span class=nx>removeChangeListener</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>handleChange</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>handleChange</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>data</span><span class=o>:</span> <span class=nx>selectData</span><span class=p>(</span><span class=nx>DataSource</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// ... and renders the wrapped component with the fresh data!
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// Notice that we pass through any additional props
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=p>&lt;</span><span class=nt>WrappedComponent</span> <span class=na>data</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>data</span><span class=p>}</span> <span class=p>{</span><span class=na>...this.props</span><span class=p>}</span> <span class=p>/&gt;;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>CommentListWithSubscription</span> <span class=o>=</span> <span class=nx>withSubscription</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>CommentList</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>DataSource</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>DataSource</span><span class=p>.</span><span class=nx>getComments</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>BlogPostWithSubscription</span> <span class=o>=</span> <span class=nx>withSubscription</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>BlogPost</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nx>DataSource</span><span class=p>,</span> <span class=nx>props</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>DataSource</span><span class=p>.</span><span class=nx>getBlogPost</span><span class=p>(</span><span class=nx>props</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><p>The first parameter is the wrapped component. The second parameter retrieves the data we’re interested in, given a <code>DataSource</code> and the current props.</p><p>When <code>CommentListWithSubscription</code> and <code>BlogPostWithSubscription</code> are rendered, <code>CommentList</code> and <code>BlogPost</code> will be passed a <code>data</code> prop with the most current data retrieved from <code>DataSource</code>:</p><p>Note that a HOC <strong>doesn’t modify</strong> the input component, <strong>nor does it use inheritance</strong> to copy its behavior. Rather, a HOC <strong><em>composes</em> the original component by <em>wrapping</em> it in a container component</strong>. A HOC is a <strong>pure function</strong> with zero side-effects.</p><p>And that’s it! The wrapped component receives all the props of the container, along with a new prop, <code>data</code>, which it uses to render its output. The HOC isn’t concerned with how or why the data is used, and the wrapped component isn’t concerned with where the data came from.</p><h3 id=caveat>Caveat</h3><ul><li><p>Don’t Use HOCs Inside the render Method</p><p>Instead, apply HOCs outside the component definition so that the resulting component is created only once. Then, its identity will be consistent across renders. This is usually what you want, anyway.</p></li><li><p>Static Methods Must Be Copied Over</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kd>function</span> <span class=nx>enhance</span><span class=p>(</span><span class=nx>WrappedComponent</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>class</span> <span class=nx>Enhance</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span><span class=cm>/*...*/</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Must know exactly which method(s) to copy :(
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>Enhance</span><span class=p>.</span><span class=nx>staticMethod</span> <span class=o>=</span> <span class=nx>WrappedComponent</span><span class=p>.</span><span class=nx>staticMethod</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>Enhance</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//or
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=nx>hoistNonReactStatic</span> <span class=nx>from</span> <span class=s1>&#39;hoist-non-react-statics&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>enhance</span><span class=p>(</span><span class=nx>WrappedComponent</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>class</span> <span class=nx>Enhance</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span><span class=cm>/*...*/</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>hoistNonReactStatic</span><span class=p>(</span><span class=nx>Enhance</span><span class=p>,</span> <span class=nx>WrappedComponent</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>Enhance</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li><li><p>Refs Aren’t Passed Through</p><p>While the convention for higher-order components is to pass through all props to the wrapped component, this does not work for <strong>refs</strong>. That’s because <code>ref</code> is not really a prop — like <code>key</code>, it’s <strong>handled specially</strong> by React. If you add a ref to an element whose component is the result of a HOC, the ref refers to an instance of the <strong>outermost container component</strong>, not the wrapped component.</p><p>Fortunately, we can explicitly forward refs to the inner <code>FancyButton</code> component using the <code>React.forwardRef</code> API.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>function</span> <span class=nx>logProps</span><span class=p>(</span><span class=nx>Component</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>class</span> <span class=nx>LogProps</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>componentDidUpdate</span><span class=p>(</span><span class=nx>prevProps</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;old props:&#39;</span><span class=p>,</span> <span class=nx>prevProps</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;new props:&#39;</span><span class=p>,</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=p>{</span><span class=nx>forwardedRef</span><span class=p>,</span> <span class=p>...</span><span class=nx>rest</span><span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=c1>// Assign the custom prop &#34;forwardedRef&#34; as a ref
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>return</span> <span class=o>&lt;</span><span class=nx>Component</span> <span class=nx>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>forwardedRef</span><span class=p>}</span> <span class=p>{...</span><span class=nx>rest</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Note the second param &#34;ref&#34; provided by React.forwardRef.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// We can pass it along to LogProps as a regular prop, e.g. &#34;forwardedRef&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// And it can then be attached to the Component.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=nx>React</span><span class=p>.</span><span class=nx>forwardRef</span><span class=p>((</span><span class=nx>props</span><span class=p>,</span> <span class=nx>ref</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&lt;</span><span class=nx>LogProps</span> <span class=p>{...</span><span class=nx>props</span><span class=p>}</span> <span class=nx>forwardedRef</span><span class=o>=</span><span class=p>{</span><span class=nx>ref</span><span class=p>}</span> <span class=o>/&gt;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li></ul><h2 id=render-props>Render Props</h2><p><strong>A render prop is a function prop that a component uses to know what to render.</strong></p><p>This technique makes the behavior that we need to share extremely portable. To get that behavior, render a <code>&lt;Mouse></code> with a <code>render</code> prop that tells it what to render with the current (x, y) of the cursor.</p><p>One interesting thing to note about render props is that you can implement most <a class=link href=https://reactjs.org/docs/higher-order-components.html target=_blank rel=noopener>higher-order components</a> (HOC) using a regular component with a render prop.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Cat</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>mouse</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>mouse</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/cat.jpg&#34;</span> <span class=na>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>position</span><span class=o>:</span> <span class=s1>&#39;absolute&#39;</span><span class=p>,</span> <span class=nx>left</span><span class=o>:</span> <span class=nx>mouse</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span> <span class=nx>top</span><span class=o>:</span> <span class=nx>mouse</span><span class=p>.</span><span class=nx>y</span> <span class=p>}}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Mouse</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>super</span><span class=p>(</span><span class=nx>props</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>handleMouseMove</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>handleMouseMove</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>x</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>y</span><span class=o>:</span> <span class=mi>0</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleMouseMove</span><span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>setState</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>x</span><span class=o>:</span> <span class=nx>event</span><span class=p>.</span><span class=nx>clientX</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>y</span><span class=o>:</span> <span class=nx>event</span><span class=p>.</span><span class=nx>clientY</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span> <span class=na>style</span><span class=o>=</span><span class=p>{{</span> <span class=nx>height</span><span class=o>:</span> <span class=s1>&#39;100vh&#39;</span> <span class=p>}}</span> <span class=na>onMouseMove</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleMouseMove</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>          Instead of providing a static representation of what &lt;Mouse&gt; renders,
</span></span></span><span class=line><span class=cl><span class=cm>          use the `render` prop to dynamically determine what to render.
</span></span></span><span class=line><span class=cl><span class=cm>        */</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>render</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>MouseTracker</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Move</span> <span class=nx>the</span> <span class=nx>mouse</span> <span class=nx>around</span><span class=o>!</span><span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>Mouse</span> <span class=na>render</span><span class=o>=</span><span class=p>{</span><span class=nx>mouse</span> <span class=p>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>Cat</span> <span class=na>mouse</span><span class=o>=</span><span class=p>{</span><span class=nx>mouse</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>)}/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>It’s important to remember that just because the pattern is called “render props” you don’t have to use a prop named render to use this pattern. In fact, <strong>any prop that is a function that a component uses to know what to render is technically a “render prop”</strong>.</p><h2 id=strict-mode>Strict Mode</h2><p><code>StrictMode</code> is a tool for highlighting potential problems in an application. Like <code>Fragment</code>, <code>StrictMode</code> does not render any visible UI. It activates additional checks and warnings for its descendants.</p><blockquote><p><strong>Note</strong>: Strict mode checks are run in development mode only; <em>they do not impact the production build</em>.</p></blockquote><p>You can enable strict mode for any part of your application.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>ExampleApplication</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Header</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>React.StrictMode</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>ComponentOne</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>          <span class=p>&lt;</span><span class=nt>ComponentTwo</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>React.StrictMode</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Footer</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><code>StrictMode</code> currently helps with:</p><ul><li>Identifying components with <strong>unsafe lifecycles</strong></li><li>Warning about <strong>legacy string ref API usage</strong></li><li>Warning about <strong>deprecated findDOMNode usage</strong></li><li>Detecting <strong>unexpected side effects</strong></li><li>Detecting <strong>legacy context API</strong></li><li>Detecting <strong>unsafe effects</strong></li></ul><h2 id=proptypes>PropTypes</h2><p>As your app grows, you can catch a lot of bugs with typechecking. For some applications, you can use JavaScript extensions like <a class=link href=https://flow.org/ target=_blank rel=noopener>Flow</a> or <a class=link href=https://www.typescriptlang.org/ target=_blank rel=noopener>TypeScript</a> to typecheck your whole application. But even if you don’t use those, React has some <strong>built-in typechecking abilities</strong>. To run typechecking on the props for a component, you can assign the special <code>propTypes</code> property:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>PropTypes</span> <span class=nx>from</span> <span class=s1>&#39;prop-types&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Greeting</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Greeting</span><span class=p>.</span><span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><blockquote><p><strong>Note</strong> : <code>React.PropTypes</code> has moved into a different package since React v15.5. Please use <a class=link href=https://www.npmjs.com/package/prop-types target=_blank rel=noopener>the <code>prop-types</code> library instead</a>.</p></blockquote><p>When an invalid value is provided for a prop, a warning will be shown in the JavaScript console. For performance reasons, <code>propTypes</code> is only checked in development mode.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>PropTypes</span> <span class=nx>from</span> <span class=s1>&#39;prop-types&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>MyComponent</span><span class=p>.</span><span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// You can declare that a prop is a specific JS type. By default, these
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// are all optional.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalArray</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>array</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>optionalBool</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>bool</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>optionalFunc</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>func</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>optionalNumber</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>optionalObject</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>object</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>optionalString</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>optionalSymbol</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>symbol</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Anything that can be rendered: numbers, strings, elements or an array
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// (or fragment) containing these types.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalNode</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>node</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// A React element.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalElement</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>element</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// A React element type (ie. MyComponent).
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalElementType</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>elementType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// You can also declare that a prop is an instance of a class. This uses
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// JS&#39;s instanceof operator.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalMessage</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>instanceOf</span><span class=p>(</span><span class=nx>Message</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// You can ensure that your prop is limited to specific values by treating
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// it as an enum.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalEnum</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>oneOf</span><span class=p>([</span><span class=s1>&#39;News&#39;</span><span class=p>,</span> <span class=s1>&#39;Photos&#39;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// An object that could be one of many types
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalUnion</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>oneOfType</span><span class=p>([</span>
</span></span><span class=line><span class=cl>    <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>number</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>instanceOf</span><span class=p>(</span><span class=nx>Message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>]),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// An array of a certain type
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalArrayOf</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>arrayOf</span><span class=p>(</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>number</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// An object with property values of a certain type
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalObjectOf</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>objectOf</span><span class=p>(</span><span class=nx>PropTypes</span><span class=p>.</span><span class=nx>number</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// An object taking on a particular shape
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalObjectWithShape</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>shape</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>color</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>fontSize</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>number</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// An object with warnings on extra properties
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>optionalObjectWithStrictShape</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>exact</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>quantity</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>number</span>
</span></span><span class=line><span class=cl>  <span class=p>}),</span>   
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// You can chain any of the above with `isRequired` to make sure a warning
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// is shown if the prop isn&#39;t provided.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>requiredFunc</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>func</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// A required value of any data type
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>requiredAny</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>any</span><span class=p>.</span><span class=nx>isRequired</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// You can also specify a custom validator. It should return an Error
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// object if the validation fails. Don&#39;t `console.warn` or throw, as this
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// won&#39;t work inside `oneOfType`.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>customProp</span><span class=o>:</span> <span class=kd>function</span><span class=p>(</span><span class=nx>props</span><span class=p>,</span> <span class=nx>propName</span><span class=p>,</span> <span class=nx>componentName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=sr>/matchme/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>props</span><span class=p>[</span><span class=nx>propName</span><span class=p>]))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Invalid prop `&#39;</span> <span class=o>+</span> <span class=nx>propName</span> <span class=o>+</span> <span class=s1>&#39;` supplied to&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39; `&#39;</span> <span class=o>+</span> <span class=nx>componentName</span> <span class=o>+</span> <span class=s1>&#39;`. Validation failed.&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// You can also supply a custom validator to `arrayOf` and `objectOf`.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// It should return an Error object if the validation fails. The validator
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// will be called for each key in the array or object. The first two
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// arguments of the validator are the array or object itself, and the
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// current item&#39;s key.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>customArrayProp</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>arrayOf</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>propValue</span><span class=p>,</span> <span class=nx>key</span><span class=p>,</span> <span class=nx>componentName</span><span class=p>,</span> <span class=nx>location</span><span class=p>,</span> <span class=nx>propFullName</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=sr>/matchme/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>propValue</span><span class=p>[</span><span class=nx>key</span><span class=p>]))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;Invalid prop `&#39;</span> <span class=o>+</span> <span class=nx>propFullName</span> <span class=o>+</span> <span class=s1>&#39;` supplied to&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39; `&#39;</span> <span class=o>+</span> <span class=nx>componentName</span> <span class=o>+</span> <span class=s1>&#39;`. Validation failed.&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h3 id=single-child>Single Child</h3><p>With <code>PropTypes.element</code> you can specify that only a single child can be passed to a component as children.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>PropTypes</span> <span class=nx>from</span> <span class=s1>&#39;prop-types&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>MyComponent</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// This must be exactly one element or it will warn.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>children</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=nx>children</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>MyComponent</span><span class=p>.</span><span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>children</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>element</span><span class=p>.</span><span class=nx>isRequired</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h3 id=default-prop-values>Default Prop Values</h3><p>You can define default values for your <code>props</code> by assigning to the special <code>defaultProps</code> property:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>class</span> <span class=nx>Greeting</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Specifies the default values for props:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Greeting</span><span class=p>.</span><span class=nx>defaultProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;Stranger&#39;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Renders &#34;Hello, Stranger&#34;:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>root</span> <span class=o>=</span> <span class=nx>ReactDOM</span><span class=p>.</span><span class=nx>createRoot</span><span class=p>(</span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;example&#39;</span><span class=p>));</span> 
</span></span><span class=line><span class=cl><span class=nx>root</span><span class=p>.</span><span class=nx>render</span><span class=p>(&lt;</span><span class=nt>Greeting</span> <span class=p>/&gt;);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//or
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>class</span> <span class=nx>Greeting</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>static</span> <span class=nx>defaultProps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;stranger&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The <code>defaultProps</code> will be used to ensure that <code>this.props.name</code> will have a value if it was not specified by the parent component. The <code>propTypes</code> typechecking happens after <code>defaultProps</code> are resolved, so typechecking will also apply to the <code>defaultProps</code>.</p><h3 id=function-components>Function Components</h3><p>If you are using function components in your regular development, you may want to make some small changes to allow PropTypes to be properly applied.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>PropTypes</span> <span class=nx>from</span> <span class=s1>&#39;prop-types&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>HelloWorldComponent</span><span class=p>({</span> <span class=nx>name</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>Hello</span><span class=p>,</span> <span class=p>{</span><span class=nx>name</span><span class=p>}&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>HelloWorldComponent</span><span class=p>.</span><span class=nx>propTypes</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=nx>PropTypes</span><span class=p>.</span><span class=nx>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>HelloWorldComponent</span>
</span></span></code></pre></div><h2 id=portals>Portals</h2><p>Portals provide a first-class way to render children into a DOM node that exists outside the DOM hierarchy of the parent component.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>ReactDOM</span><span class=p>.</span><span class=nc>createPortal</span><span class=o>(</span><span class=nt>child</span><span class=o>,</span> <span class=nt>container</span><span class=o>)</span>
</span></span></code></pre></div><p>The first argument (child) is any renderable React child, such as an element, string, or fragment. The second argument (container) is a DOM element.</p><p>Normally, when you return an element from a component’s render method, it’s mounted into the DOM as a child of the nearest parent node. However, sometimes it’s useful to insert a child into a different location in the DOM. A typical use case for portals is when a parent component has an <code>overflow: hidden</code> or <code>z-index</code> style, but you need the child to visually “break out” of its container.</p><p>Even though a portal can be anywhere in the DOM tree, it behaves like a normal React child in <strong>every other way</strong>. Features like context work exactly the same regardless of whether the child is a portal, as the portal <strong>still exists in the <em>React tree</em></strong> regardless of position in the <em>DOM tree</em>.</p><p>This includes event bubbling. An event fired from inside a portal will <strong>propagate to ancestors in the containing <em>React tree</em></strong>, even if those elements are not ancestors in the <em>DOM tree</em>.</p><p>Catching an event bubbling up from a portal in a parent component allows the development of more flexible abstractions that are not inherently reliant on portals.</p><h2 id=profiler>Profiler</h2><p>The Profiler measures <strong>how often</strong> a React application <strong>renders</strong> and <strong>what the “cost”</strong> of rendering is. Its purpose is to help identify parts of an application that are slow and may benefit from optimizations such as memoization.</p><blockquote><p><strong>Note</strong>: Profiling adds some additional overhead, so <strong>it is disabled in <a class=link href=https://reactjs.org/docs/optimizing-performance.html#use-the-production-build target=_blank rel=noopener>the production build</a></strong>.</p></blockquote><p>A <code>Profiler</code> can be added anywhere in a React tree to measure the cost of rendering that part of the tree. It requires two props: an <code>id</code> (string) and an <code>onRender</code> callback (function) which React calls any time a component within the tree “commits” an update. It receives parameters describing what was rendered and how long it took.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=nx>unction</span> <span class=nx>onRenderCallback</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=p>,</span> <span class=c1>// the &#34;id&#34; prop of the Profiler tree that has just committed
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>phase</span><span class=p>,</span> <span class=c1>// either &#34;mount&#34; (if the tree just mounted) or &#34;update&#34; (if it re-rendered)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>actualDuration</span><span class=p>,</span> <span class=c1>// time spent rendering the committed update
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>baseDuration</span><span class=p>,</span> <span class=c1>// estimated time to render the entire subtree without memoization
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>startTime</span><span class=p>,</span> <span class=c1>// when React began rendering this update
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>commitTime</span><span class=p>,</span> <span class=c1>// when React committed this update
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>interactions</span> <span class=c1>// the Set of interactions belonging to this update
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Aggregate or log render timings...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div><ul><li><strong><code>id: string</code></strong> - The <code>id</code> prop of the <code>Profiler</code> tree that has just committed. This can be used to identify which part of the tree was committed if you are using multiple profilers.</li><li><strong><code>phase: "mount" | "update"</code></strong> - Identifies whether the tree has just been mounted for the first time or re-rendered due to a change in props, state, or hooks.</li><li><strong><code>actualDuration: number</code></strong> - Time spent rendering the <code>Profiler</code> and its descendants for the current update. This indicates how well the subtree makes use of memoization (e.g. <a class=link href=https://reactjs.org/docs/react-api.html#reactmemo target=_blank rel=noopener><code>React.memo</code></a>, <a class=link href=https://reactjs.org/docs/hooks-reference.html#usememo target=_blank rel=noopener><code>useMemo</code></a>, <a class=link href=https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-shouldcomponentupdate target=_blank rel=noopener><code>shouldComponentUpdate</code></a>). Ideally this value should decrease significantly after the initial mount as many of the descendants will only need to re-render if their specific props change.</li><li><strong><code>baseDuration: number</code></strong> - Duration of the most recent <code>render</code> time for each individual component within the <code>Profiler</code> tree. This value estimates a worst-case cost of rendering (e.g. the initial mount or a tree with no memoization).</li><li><strong><code>startTime: number</code></strong> - Timestamp when React began rendering the current update.</li><li><strong><code>commitTime: number</code></strong> - Timestamp when React committed the current update. This value is shared between all profilers in a commit, enabling them to be grouped if desirable.</li><li><strong><code>interactions: Set</code></strong> - Set of <a class=link href=https://fb.me/react-interaction-tracing target=_blank rel=noopener>“interactions”</a> that were being traced when the update was scheduled (e.g. when <code>render</code> or <code>setState</code> were called).</li></ul><h2 id=web-components>Web Components</h2><p>to be continued</p><h2 id=optimizing-performance>Optimizing Performance</h2><p>to be continued</p></section><footer class=article-footer><section class=article-tags><a href=/tags/react/>React</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on May 01, 2021 00:00 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/javaenum/><div class=article-image><img src=/covers/cover19.png loading=lazy data-key data-hash=/covers/cover19.png></div><div class=article-details><h2 class=article-title>【Java】Enum</h2></div></a></article><article class=has-image><a href=/p/javadates-and-times/><div class=article-image><img src=/covers/cover19.png loading=lazy data-key data-hash=/covers/cover19.png></div><div class=article-details><h2 class=article-title>【Java】Dates and Times</h2></div></a></article><article class=has-image><a href=/p/javareleases/><div class=article-image><img src=/covers/cover9.png loading=lazy data-key data-hash=/covers/cover9.png></div><div class=article-details><h2 class=article-title>【Java】Releases</h2></div></a></article><article class=has-image><a href=/p/mac.db_store-file/><div class=article-image><img src=/covers/cover20.jpg loading=lazy data-key data-hash=/covers/cover20.jpg></div><div class=article-details><h2 class=article-title>【Mac】.DB_Store file</h2></div></a></article><article><a href=/p/solidityconcepts/><div class=article-details><h2 class=article-title>【Solidity】Concepts</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 飞鸿踏雪泥</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>